var insideThemis=!1,themisLandingPage=!1,insideThemisAdmin=!1,insideThemisStudProfile=!1,insideAdminQuiz=!1,insideCQuizzing=!1,skillOrderedMetaData=[],currentInfoIconId,themisNavigationPopOverFlag,themisLastVisitedQuizId,currentQuizId="",comingFromRefreshThemis="",globalComparisonVal="",currentSkillElem="",themisSubjectAreaVOListForReport=[],totalRegisteredUser="",institutionCumulativeAverageReport="",themisStudentCourseProgressReport=[],themisStudentDynamicReport=[],courseStudentActiveStudents="";function loadThemisBarProduct(e){if(insideThemis=!0,CaseConnect.themisCurrentSubjectAreaTitle="",$("#themis-sa-menu-mobile").modal("hide"),$("#themis-nav-menu-mobile").modal("hide"),e.userActivityVO.themisProductId&&(CaseConnect.currentProductId=e.userActivityVO.themisProductId,localStorage.setItem("currentProductId",CaseConnect.currentProductId)),e.userActivityVO.themisSubjectAreaVOList){var t=e.userActivityVO.themisSubjectAreaVOList;"object"==$.type(t)&&(t=[t]),localStorage.setItem("themisSubjectAreaVOList",t),CaseConnect.themisSubjectAreaVOList=t,$("#page-loading-spinner").show(),$("#bookshelf-nav-menu-mobile").modal("hide"),$("#ereader-nav-menu-mobile").modal("hide"),$("#outline-nav-menu-mobile").modal("hide"),$("#study-nav-menu-mobile").modal("hide"),$("#cases-nav-menu-mobile").modal("hide"),$("#generic-nav-menu-mobile").modal("hide"),$("#news-feed-nav-mobile").modal("hide"),map.wk_conatiner.load("themis-landing.html?v2",function(){insideResourcePage=!1,insideClassInsightsPage=!1,insideStudycenterPage=!1,insideNewsFeed=!1,insideEreader=!1,insideStudy=!1,insideStaticPage=!1,insideCasesPage=!1,insideOutline=!1,insideBookshelf=!1,insideGlobalSearchResult=!1,insideBarCheck=!0,themisLandingPage=!0,insideThemisStudProfile=!1,insideAdminQuiz=!1,insideThemisAdmin=!0,insideThemis=!1,insideCQuizzing=!1,insidePracticePerfect=!1,CaseConnect.themisSubjectAreaId="",CaseConnect.themisCurrentSubjectAreaTitle="",$(".ereader-main-header-title").html(""),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag&&$(".resourceMenushow").removeClass("resourceMenuhide");var t=Handlebars.getTemplate("themis-nav-bar")(e.userActivityVO);$("#themis-header-nav-bar-mobile").html(t),$("#themis-header-nav-bar-mobile .ipad-nav-li").remove(),$(".navbar-ipad-ul").html(t),$(".navbar-ipad-ul .visible-xs").remove(),themisStudentQuizzesPage();var i=Handlebars.getTemplate("themis-bar-landing")(e.userActivityVO);if($("#themis-course-progress").html(i),void 0!==e.userActivityVO.themisSubjectAreaVOList){var a=e.userActivityVO.themisSubjectAreaVOList;"object"==$.type(a)&&(a=[a]);for(var s=0;s<a.length;s++)if(void 0!==a[s].themisResultVOList){var o=a[s].themisResultVOList;"object"==$.type(o)&&(o=[o]);for(var n=0,r=0;r<o.length;r++)"In Progress"===o[r].quizStatus&&n++;n===o.length&&$(".themis-sa-radio-selector button[subjectAreaId='"+a[s].subjectAreaId+"']").hide()}}getThemisBarOMeter(CaseConnect.currentProductId),$(window).trigger("resize"),adjustLeftNavHeight(),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad.insights").addClass("border-bottom-blue"),$(".nav-ipad-saTitleName").html(""),$("#page-loading-spinner").hide()})}Utility.hideSpinner()}function getThemisBarOMeter(e){themisLandingPage=!0,CaseConnect.currentProductId=e,localStorage.setItem("currentProductId",CaseConnect.currentProductId);var t={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_PRODUCT_LANDING_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},themisProductVO:{productId:CaseConnect.currentProductId,enableComparison:!0}};$.ajax({url:properties[properties.env]+"/manageThemis/getThemisBarOMeter",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(t)}).then(function(e){$(window).width();if($("#page-loading-spinner").show(),void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),"true"===e.status){if(insideThemis=!0,void 0!==e.themisResultVO){var t=e.themisResultVO;$("#total-questions-themis").html(t.totalQuestionCount);var i=Handlebars.getTemplate("themis-bar-o-meter")(t);$("#themis-bar-o-meter").html(i),$(".bar-answered-count").html(t.answeredCount),$(".bar-total-count").html(t.totalQuestionCount);var a=$("input#all-average").prop("checked"),s=$("input#all-average").prop("checked");a?($(".course-triangle-all").show(),$(".course-triangle-institution").hide()):s?($(".course-triangle-all").hide(),$(".course-triangle-institution").show()):($(".course-triangle-all").hide(),$(".course-triangle-institution").hide());var o=$(".overall-progress-wrapper div.progress-bar-cc-correct").css("width");if("0%"===$(".overall-progress-wrapper div.progress-bar-cc-correct span").html()?$(".overall-progress-wrapper .progress-bar-cc-incorrect span").hide():$(".overall-progress-wrapper .progress-bar-cc-incorrect span").show(),parseInt(o)<35){var n=$(".progress-bar-cc-correct span.progress-text").width()+5+"px";$(".overall-progress-wrapper .progress-bar-cc-incorrect span").css({position:"absolute",left:n})}var r=$("#themis-bar-o-meter .quiz-details-title"),l="hover";l=navigator.userAgent.match(/(iPad|Android|iPhone)/)||insideTouchDevices?"click":"hover",r.find(".quiz-details-title-elem").popover({placement:"top",trigger:l,template:'<div class="popover themis-skill-desc-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return $(this).parent().find(".skill-desc-content").html()}})}$("#page-loading-spinner").hide(),$(window).trigger("resize")}else $(window).trigger("resize"),$("#page-loading-spinner").hide();"0"===$(".bar-answered-count").html()?$(".themis-generic-selector").hide():$(".themis-generic-selector").show(),sessionTimeOut()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function updateAllCourseInstiAverage(e){var t=e.currentTarget.getAttribute("optionClicked"),i=($("input[selectionTitle='all-average']").prop("checked"),$("input[selectionTitle='institution-average']").prop("checked"),$(".sa-triangle-all")),a=$(".sa-triangle-institution");if("all"===t){if("block"===$(".course-triangle-all").css("display")){if($("input[selectionTitle='all-average']").prop("checked",!1),$("input[selectionTitle='course-all-average']").prop("checked",!1),$(".course-triangle-all").hide(),i.length>0){var s="";$(i).each(function(){s=$(this).attr("subjectAreaId"),$(".sa-triangle-all-"+s).hide()})}$(".student-progress").css("display","block"),$(".student-progress-semi").hide(),$(".student-progress-allUser").hide(),$(".student-progress-institution").hide()}else{if($("input[selectionTitle='all-average']").prop("checked",!0),$("input[selectionTitle='course-all-average']").prop("checked",!0),$(".course-triangle-all").show(),i.length>0){s="";$(i).each(function(){s=$(this).attr("subjectAreaId"),$(".sa-triangle-all-"+s).show(),$(".sa-triangle-institution-"+s).hide()})}$(".course-triangle-institution").hide(),$(".student-progress").hide(),$(".student-progress-semi").css("display","block"),$(".student-progress-allUser").css("display","block"),$(".student-progress-institution").hide()}$(".course-triangle-institution").hide()}else if("institution"===t){if("block"===$(".course-triangle-institution").css("display")){if($("input[selectionTitle='institution-average']").prop("checked",!1),$("input[selectionTitle='course-institution-average']").prop("checked",!1),$(".course-triangle-institution").hide(),a.length>0){var o="";s="";$(a).each(function(){s=$(this).attr("subjectAreaId"),$(".sa-triangle-institution-"+s).hide()})}$(".student-progress").css("display","block"),$(".student-progress-semi").hide(),$(".student-progress-allUser").hide(),$(".student-progress-institution").hide()}else{if($("input[selectionTitle='institution-average']").prop("checked",!0),$("input[selectionTitle='course-institution-average']").prop("checked",!0),$(".course-triangle-institution").show(),a.length>0){o="",s="";$(a).each(function(){o=$(this).attr("id"),s=$(this).attr("subjectAreaId"),$("#"+o).prop("checked",!0),$(".sa-triangle-institution-"+s).show(),$(".sa-triangle-all-"+s).hide()})}$(".course-triangle-all").hide(),$(".student-progress").hide(),$(".student-progress-semi").css("display","block"),$(".student-progress-allUser").hide(),$(".student-progress-institution").css("display","block")}$(".course-triangle-all").hide()}else $(".course-triangle-all").hide(),$(".course-triangle-institution").hide(),$(".student-progress").css("display","block"),$(".student-progress-semi").hide(),$(".student-progress-allUser").hide(),$(".student-progress-institution").hide()}Handler.themisBarProduct={request:function(e){CaseConnect.currentProductId=localStorage.getItem("currentProductId"),CaseConnect.themisSAenableComparison=!0,CaseConnect.themisCurrentSubjectAreaTitle="",$("#themis-sa-menu-mobile").modal("hide"),$("#themis-nav-menu-mobile").modal("hide"),e.data={userVO:{userId:map.userId,userRole:map.userRole,userRoleId:map.userRoleId,userActivityVO:{lastActivityCode:"THEMIS_PRODUCT_LANDING_PAGE",pageNavigatingFrom:"EReader",pageNavigatingTo:"Bookshelf",themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{deviceOS:CaseConnect.deviceOS,deviceType:CaseConnect.deviceType,browserName:CaseConnect.browserName,appType:CaseConnect.appType,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},themisProductVO:{productId:CaseConnect.currentProductId,enableComparison:!0}},Utility.showSpinner()},response:function(e,t){if("false"===e.status)sessionAuthFails(e),Utility.hideSpinner();else{void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken);if(localStorage.setItem("currentProductId",CaseConnect.currentProductId),e.themisSubjectAreaVOList){var i=e.themisSubjectAreaVOList;"object"==$.type(i)&&(i=[i]),CaseConnect.themisSubjectAreaVOList=i,localStorage.setItem("saVOList",JSON.stringify(CaseConnect.themisSubjectAreaVOList)),$("#page-loading-spinner").show(),$("#bookshelf-nav-menu-mobile").modal("hide"),$("#ereader-nav-menu-mobile").modal("hide"),$("#outline-nav-menu-mobile").modal("hide"),$("#study-nav-menu-mobile").modal("hide"),$("#cases-nav-menu-mobile").modal("hide"),$("#generic-nav-menu-mobile").modal("hide"),$("#news-feed-nav-mobile").modal("hide"),themisAdminlanding?map.wk_conatiner.load("themis-admin-landing.html?v6",function(){insideResourcePage=!1,insideClassInsightsPage=!1,insideStudycenterPage=!1,insideNewsFeed=!1,insideEreader=!1,insideStudy=!1,insideStaticPage=!1,insideCasesPage=!1,insideOutline=!1,insideBookshelf=!1,insideGlobalSearchResult=!1,insideThemis=!1,insideThemisAdmin=!0,insideThemisStudProfile=!1,insideAdminQuiz=!0,insideCQuizzing=!1,insidePracticePerfect=!1,navBarAdmin(),coursesPage(),quizzesPage(),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag&&$(".resourceMenushow").removeClass("resourceMenuhide"),null!=localStorage.getItem("mbeAdminSchoolName")&&null!=localStorage.getItem("mbeAdminSchoolName")&&($(".nav-ipad-saTitleName.institution-name").html(localStorage.getItem("mbeAdminSchoolName")),$(".nav-ipad-saTitleName.institution-name").attr("title",localStorage.getItem("mbeAdminSchoolName"))),getCheckPointsByThemisSA()}):map.wk_conatiner.load("themis-landing.html?v1",function(){insideResourcePage=!1,insideClassInsightsPage=!1,insideStudycenterPage=!1,insideNewsFeed=!1,insideEreader=!1,insideStudy=!1,insideStaticPage=!1,insideCasesPage=!1,insideOutline=!1,insideBookshelf=!1,insideGlobalSearchResult=!1,insideBarCheck=!0,themisLandingPage=!0,insideThemis=!0,insideThemisAdmin=!1,insideThemisStudProfile=!1,insideAdminQuiz=!1,insideCQuizzing=!1,insidePracticePerfect=!1,CaseConnect.newsFeedFlag=!1,CaseConnect.resourceFlag=!1,$(".ereader-main-header-title").html(""),comingFromThemis&&"false"!==comingFromThemis||(CaseConnect.themisSubjectAreaId="",CaseConnect.themisCurrentSubjectAreaTitle=""),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide();var t=Handlebars.getTemplate("themis-nav-bar")(e);if($("#themis-header-nav-bar-mobile").html(t),$("#themis-header-nav-bar-mobile .ipad-nav-li").remove(),$(".navbar-ipad-ul").html(t),$(".navbar-ipad-ul .visible-xs").remove(),themisStudentQuizzesPage(),"true"!==comingFromThemis){var i=Handlebars.getTemplate("themis-bar-landing")(e);if($("#themis-course-progress").html(i),void 0!==e.themisSubjectAreaVOList){var a=e.themisSubjectAreaVOList;"object"==$.type(a)&&(a=[a]);for(var s=0;s<a.length;s++)if(void 0!==a[s].themisResultVOList){var o=a[s].themisResultVOList;"object"==$.type(o)&&(o=[o]);for(var n=0,r=0;r<o.length;r++)"In Progress"===o[r].quizStatus&&n++;n===o.length&&$(".themis-sa-radio-selector button[subjectAreaId='"+a[s].subjectAreaId+"']").hide()}}getThemisBarOMeter(CaseConnect.currentProductId),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad.insights").addClass("border-bottom-blue"),$(".nav-ipad-saTitleName").html(""),$(window).trigger("resize"),$("#page-loading-spinner").hide()}else getCheckPointsByThemisSA()})}Utility.hideSpinner()}}};var checkPointsMetaDataByThemisSA=[],themisPostQuizRecommendationVOSMF=[],topicContent,kendoChartUserData;function getCheckPointsByThemisSA(e){themisLandingPage=!1,$(".modal-backdrop").remove(),$("#themis-admin-modal").modal("hide"),insideThemisStudProfile=!1,void 0===e||null==e?CaseConnect.themisSubjectAreaId=localStorage.getItem("themisSaId"):(comingFromRefreshThemis=e.currentTarget.getAttribute("comingFromRefresh"),localStorage.setItem("currentSubAreaNameInQuizzes",e.currentTarget.getAttribute("satitle")),"true"===comingFromRefreshThemis?$("#themis-loading-spinner-refresh").css("opacity","1.0"):(localStorage.setItem("currentQuizId",""),comingFromRefreshThemis="false",CaseConnect.themisSubjectAreaId=e.currentTarget.getAttribute("themisSaId"),CaseConnect.currentBookId=e.currentTarget.getAttribute("bookId"),CaseConnect.bookType=e.currentTarget.getAttribute("bookType"),CaseConnect.resourceFlag=e.currentTarget.getAttribute("resourceFlag"),CaseConnect.casesFlag=e.currentTarget.getAttribute("casesFlag"),CaseConnect.newsFeedFlag=e.currentTarget.getAttribute("newsFeedFlag"),CaseConnect.themisCurrentSubjectAreaTitle=e.currentTarget.getAttribute("saTitle"),localStorage.setItem("themisSaId",CaseConnect.themisSubjectAreaId),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(e.currentTarget).addClass("border-bottom-blue"),$(".navbar-ipad.assessments").addClass("border-bottom-blue"),$(".nav-ipad-saTitleName").html(CaseConnect.themisCurrentSubjectAreaTitle))),"true"===comingFromRefreshThemis?$("#themis-loading-spinner-refresh").show():$("#page-loading-spinner").show(),insideCQuizzing=!1,insidePracticePerfect=!1,"true"==localStorage.getItem("themisAdminlanding")?insideThemisAdmin=!0:(insideThemis=!0,insideAdminQuiz=!0);var t={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_CHECKPOINT_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",lastReadBookId:CaseConnect.currentBookId,themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},themisSubjectAreaVO:{themisSubjectAreaId:CaseConnect.themisSubjectAreaId}};$.ajax({url:properties[properties.env]+"/manageThemis/getCheckPointsByThemisSA",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(t)}).then(function(e){$(window).width();"true"===comingFromRefreshThemis?$("#themis-loading-spinner-refresh").show():$("#page-loading-spinner").show(),void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),"true"===e.status?loadCheckPointsByThemisSA(e):($(window).trigger("resize"),$("#themis-loading-spinner-refresh").hide(),$("#page-loading-spinner").hide()),sessionTimeOut()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#themis-loading-spinner-refresh").hide(),$("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function getPreQuizRecommendation(){"true"===comingFromRefreshThemis?$("#themis-loading-spinner-refresh").show():$("#page-loading-spinner").show();var e={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_CHECKPOINT_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",lastReadBookId:CaseConnect.currentBookId,themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},themisSubjectAreaVO:{themisSubjectAreaId:CaseConnect.themisSubjectAreaId}};$.ajax({url:properties[properties.env]+"/manageThemis/getPreQuizRecommendation",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(e)}).then(function(e){$(window).width();if("true"===comingFromRefreshThemis||$("#page-loading-spinner").show(),void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),"true"===e.status)if("undefined"!==e.themisCheckPointRecommendationVOList){var t=e.themisCheckPointRecommendationVOList;"object"==$.type(t)&&(t=[t]),$(t).each(function(){$("#themis-perpetual-message_"+this.quizId+" p").html(this.recommendation)}),$("#page-loading-spinner").hide(),$("#themis-loading-spinner-refresh").hide()}else $("#page-loading-spinner").hide(),$("#themis-loading-spinner-refresh").hide();else $(window).trigger("resize"),$("#page-loading-spinner").hide(),$("#themis-loading-spinner-refresh").hide()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function loadCheckPointsByThemisSA(e){var t;if($("#page-loading-spinner").show(),$("#themis-landing-content-area").hide(),$("#themis-checkpoint-container").show(),$("#themis-sa-menu-mobile").modal("hide"),$("#themis-nav-menu-mobile").modal("hide"),themisNavigationPopOverFlag=e.themisNavigationPopOverFlag,themisLastVisitedQuizId=e.themisLastVisitedQuizId,themisAdminlanding)insideAdminQuiz=!0,$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().children().removeClass("border-bottom-blue");else{t=CaseConnect.themisSubjectAreaVOList;var i=Handlebars.getTemplate("themis-nav-bar-refresh")(t);$("#themis-header-nav-bar-mobile").html(i),$("#themis-header-nav-bar-mobile .ipad-nav-li").remove(),$(".navbar-ipad-ul").html(i),$(".navbar-ipad-ul .visible-xs").remove(),insideAdminQuiz=!1}var a=localStorage.getItem("themisSaId");if(null!=a&&null!=a&&($("#themisSaId"+a).addClass("border-bottom-blue"),$(".navbar-ipad.assessments").addClass("border-bottom-blue")),void 0!==e.themisPostQuizRecommendationVO&&(themisPostQuizRecommendationVOSMF=e.themisPostQuizRecommendationVO),e.themisSubjectAreaVO?(CaseConnect.bookData=e.themisSubjectAreaVO,CaseConnect.resourceFlag=e.themisSubjectAreaVO.resourceFlag,CaseConnect.casesFlag=e.themisSubjectAreaVO.casesFlag,CaseConnect.newsFeedFlag=e.themisSubjectAreaVO.newsFeedFlag,CaseConnect.themisSubjectAreaId=e.themisSubjectAreaVO.themisSubjectAreaId,CaseConnect.currentBookId=e.themisSubjectAreaVO.bookId,CaseConnect.bookType=e.themisSubjectAreaVO.bookType,void 0!==e.themisSubjectAreaVO.bookTitle?(CaseConnect.bookTitle=e.themisSubjectAreaVO.bookTitle,$(".ereader-main-header-title").html(CaseConnect.bookTitle)):(CaseConnect.bookTitle="",$(".ereader-main-header-title").html(""))):$(".ereader-main-header-title").html(""),void 0!==e.themisCheckPointVOList){var s=e.themisCheckPointVOList;"object"==$.type(s)&&(s=[s]),checkPointsMetaDataByThemisSA=s;var o=(n=Handlebars.getTemplate("themis-checkpoint-content"))(checkPointsMetaDataByThemisSA);$("#themis-checkpoint-content").html(o),$(".themis-refresh-result button").attr("satitle",localStorage.getItem("currentSubAreaNameInQuizzes"));for(var n=Handlebars.getTemplate("themis-quiz-recommendations"),r=0;r<checkPointsMetaDataByThemisSA.length;r++)o=n(checkPointsMetaDataByThemisSA[r]),$("#checkpoint_"+checkPointsMetaDataByThemisSA[r].quizId).show(),$("#checkpoint_"+checkPointsMetaDataByThemisSA[r].quizId).html(o);adjustLeftNavHeight();for(var l=[],d=0;d<checkPointsMetaDataByThemisSA.length;d++)if(checkPointsMetaDataByThemisSA[d].themisDisplayVOList){l=checkPointsMetaDataByThemisSA[d].themisDisplayVOList,"object"==$.type(l)&&(l=[l]);var c=Handlebars.getTemplate("themis-display-meta")(l);$("#themis-recommendation-topic_"+checkPointsMetaDataByThemisSA[d].quizId).html(c),$(".themis-recommendation-topic div.display-name").addClass("themis-listing-elem");var u={},m=[];void 0!==checkPointsMetaDataByThemisSA[d].fundamentalConceptsCount&&(checkPointsMetaDataByThemisSA[d].fundamentalConceptsCount=parseInt(checkPointsMetaDataByThemisSA[d].fundamentalConceptsCount),m.push(checkPointsMetaDataByThemisSA[d].fundamentalConceptsCount)),void 0!==checkPointsMetaDataByThemisSA[d].implementationCount&&(checkPointsMetaDataByThemisSA[d].implementationCount=parseInt(checkPointsMetaDataByThemisSA[d].implementationCount),m.push(checkPointsMetaDataByThemisSA[d].implementationCount)),void 0!==checkPointsMetaDataByThemisSA[d].leaglReasoningCount&&(checkPointsMetaDataByThemisSA[d].leaglReasoningCount=parseInt(checkPointsMetaDataByThemisSA[d].leaglReasoningCount),m.push(checkPointsMetaDataByThemisSA[d].leaglReasoningCount)),void 0!==checkPointsMetaDataByThemisSA[d].problemSolvingCount&&(checkPointsMetaDataByThemisSA[d].problemSolvingCount=parseInt(checkPointsMetaDataByThemisSA[d].problemSolvingCount),m.push(checkPointsMetaDataByThemisSA[d].problemSolvingCount)),u={fundamentalConceptsCount:checkPointsMetaDataByThemisSA[d].fundamentalConceptsCount,implementationCount:checkPointsMetaDataByThemisSA[d].implementationCount,leaglReasoningCount:checkPointsMetaDataByThemisSA[d].leaglReasoningCount,problemSolvingCount:checkPointsMetaDataByThemisSA[d].problemSolvingCount};for(var h,p=[];0!==m.length;)h=Math.max.apply(null,m),p.push(h),m.splice(m.indexOf(h),1);var g=[];$(p).each(function(){void 0!==u.fundamentalConceptsCount&&this.toString()===u.fundamentalConceptsCount.toString()&&(g.push({title:"Foundational Concepts",count:this.toString(),quizId:checkPointsMetaDataByThemisSA[d].quizId,fundamentalConceptsCount:this.toString()}),delete u.fundamentalConceptsCount),void 0!==u.implementationCount&&this.toString()===u.implementationCount.toString()&&(g.push({title:"Implementation",count:this.toString(),quizId:checkPointsMetaDataByThemisSA[d].quizId,implementationCount:this.toString()}),delete u.implementationCount),void 0!==u.problemSolvingCount&&this.toString()===u.problemSolvingCount.toString()&&(g.push({title:"Problem Solving",count:this.toString(),quizId:checkPointsMetaDataByThemisSA[d].quizId,problemSolvingCount:this.toString()}),delete u.problemSolvingCount),void 0!==u.leaglReasoningCount&&this.toString()===u.leaglReasoningCount.toString()&&(g.push({title:"Legal Reasoning",count:this.toString(),quizId:checkPointsMetaDataByThemisSA[d].quizId,leaglReasoningCount:this.toString()}),delete u.leaglReasoningCount)});var v=Handlebars.getTemplate("themis-skills-meta")(g);$("#themis-recommendation-skill-building_"+checkPointsMetaDataByThemisSA[d].quizId).html(v),100===Math.round(parseInt(this.correct))?$("#skill-title-info_"+checkPointsMetaDataByThemisSA[d].quizId).hide():displayTooltipRecommendation("skill",checkPointsMetaDataByThemisSA[d].quizId),adjustLeftNavHeight()}var b=CaseConnect.themisSubjectAreaId;$("#themis-landing-container nav li").removeClass("active"),$("#themis-landing-container nav a[themissaid="+CaseConnect.themisSubjectAreaId+"]").parent().addClass("active"),CaseConnect.themisCurrentSubjectAreaTitle=$("#themis-header-nav-bar li a[themisSaId='"+b+"']").html(),$("#themis-sa-title").html(CaseConnect.themisCurrentSubjectAreaTitle),getPreQuizRecommendation(),getOverAlltUserQuizDetailsBySAId(b),adjustLeftNavHeight(),$(window).trigger("resize"),$("#page-loading-spinner").hide()}else $(window).trigger("resize"),$("#themis-loading-spinner-refresh").hide(),$("#page-loading-spinner").hide();(CaseConnect.bookType&&"practicepack"===CaseConnect.bookType||CaseConnect.bookType&&"oer"===CaseConnect.bookType)&&($(".hide-ereader-class").show(),$(".hide-study-page-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag?$(".resourceMenushow").removeClass("resourceMenuhide"):$(".resourceMenushow").addClass("resourceMenuhide")),(CaseConnect.bookType&&"casebook"===CaseConnect.bookType||CaseConnect.bookType&&"coursebook"===CaseConnect.bookType)&&($(".hide-study-page-class").show(),$(".hide-ereader-class").show(),$(".hide-outline-page-class").show(),$(".hide-class-insights-class").show(),$(".hide-pipe-line-class").show(),$(".class-insights-mobile-visibility").css("visibility","visible")),CaseConnect.bookType&&"studyaid"===CaseConnect.bookType&&($(".hide-ereader-class").show(),$(".hide-study-page-class").show(),$(".hide-outline-page-class").show(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").show(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide()),""===CaseConnect.bookType&&($(".hide-ereader-class").hide(),$(".hide-study-page-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),$(".resourceMenushow").addClass("resourceMenuhide")),"true"==CaseConnect.resourceFlag?$(".resourceMenushow").removeClass("resourceMenuhide"):$(".resourceMenushow").addClass("resourceMenuhide"),$(window).trigger("resize"),adminSuppressFunc(),"true"===CaseConnect.casesFlag?CaseConnect.bookType?"oer"!==CaseConnect.bookType&&$(".hide-case-page-class").show():$(".hide-case-page-class").show():$(".hide-case-page-class").hide(),"true"===CaseConnect.newsFeedFlag&&"true"==CaseConnect.adminNewsFlag?$(".hide-news-feed-class").show():$(".hide-news-feed-class").hide(),adjustLeftNavHeight(),null!=localStorage.getItem("currentSubAreaNameInQuizzes")&&null!=localStorage.getItem("currentSubAreaNameInQuizzes")&&$(".nav-ipad-saTitleName").html(localStorage.getItem("currentSubAreaNameInQuizzes")),null!=localStorage.getItem("themisSaId")&&null!=localStorage.getItem("themisSaId")&&($("#navbar-ipad-ul li a").removeClass("border-bottom-blue"),$("#navbar-ipad-ul li a#"+localStorage.getItem("themisSaId")).addClass("border-bottom-blue"))}function updateCheckpointDetails(e){if($("#themis-loading-spinner-refresh").show(),$(".themis-retake-button").hide(),$(".checkPoint-block, .themis-checkpoint-wrapper").hide(),void 0!==e.currentTarget)if(e.currentTarget.hasAttribute("nextPrevButton"))var t=(a=$(e.currentTarget)).attr("quizId"),i=a.attr("quizStatus");else{var a;t=(a=$(e.currentTarget)).attr("quizId"),i=$(e.currentTarget.children).find("button").attr("quizStatus")}else if(comingFromThemis){comingFromThemis=!1,localStorage.removeItem("comingFromThemis");t=CaseConnect.themisAttributes.quizId,i=$($("#themis-checkpoint-content .doughnut-button[quizId='"+t+"']")).attr("quizStatus")}else{var s=localStorage.getItem("currentQuizId");if(null===s||""===s)if(null!=themisLastVisitedQuizId)t=themisLastVisitedQuizId,i=$($("#themis-checkpoint-content .doughnut-button[quizId='"+t+"']")).attr("quizStatus");else t=$($("#themis-checkpoint-content .doughnut-button")[0]).attr("quizId"),i=$($("#themis-checkpoint-content .doughnut-button")[0]).attr("quizStatus");else t=s,i=$($("#themis-checkpoint-content .doughnut-button[quizId='"+t+"']")).attr("quizStatus")}var o=$(window).width();$('.dashboard-qns[quizId="'+t+'"]').html();$("#themis-checkpoint-content .doughnut").removeClass("background-gray").addClass("background-no-gray"),$("#themis-checkpoint-content .doughnut[quizId='"+t+"']").addClass("background-gray").removeClass("background-no-gray");var n=$(".assessment-ques-section:first").hasClass("background-gray");$("#themis-checkpoint-content .doughnut").removeClass("margin-right-15px").removeClass("margin-left-15px"),n?($(".themis-recommend-static").removeClass("border-radius-class"),o>1300&&$("#themis-checkpoint-content .doughnut.background-gray").addClass("margin-right-15px")):($(".themis-recommend-static").addClass("border-radius-class"),o>1300&&$("#themis-checkpoint-content .doughnut.background-gray").addClass("margin-right-15px").addClass("margin-left-15px"),$("#themis-checkpoint-content .doughnut.background-gray").css({"border-radius":"0px 10px 0px 0px;"})),$(".checkpoint-section-content[quizId='"+t+"'],.themis-checkpoint-wrapper[quizId='"+t+"']").show(),$("#topic-skill-building-block ul li a").removeClass("tab-selected active"),$(".themis-checkpoint-wrapper[quizId='"+t+"'] ul li a:first").addClass("tab-selected active"),$("#themis-recommendation-topic_"+t).show(),$("#themis-recommendation-skill-building_"+t).hide(),$('.themis-retake-button[quizId="'+t+'"]').show(),currentQuizId=t,localStorage.setItem("currentQuizId",currentQuizId);var r=$("#themis-checkpoint-content .doughnut[quizId='"+currentQuizId+"']");if(void 0!==r.next()){var l=r.next().attr("quizId"),d=r.next().attr("quizStatus");$(".next-checkpoint-arrow").attr({quizId:l,quizStatus:d})}if(void 0!==r.prev()){var c=r.prev().attr("quizId"),u=r.prev().attr("quizStatus");$(".prev-checkpoint-arrow").attr({quizId:c,quizStatus:u})}"false"===themisNavigationPopOverFlag?($(".themis-quiz-modal").hide(),$(".themis-quiz-page").show()):$(".themis-quiz-page").hide(),void 0!==i?("notAttempted"!==i&&$("#checkPoint-block_"+t).show(),"Completed"===i?($(".recommendations button").show(),"false"===themisNavigationPopOverFlag?($(".themis-quiz-modal").hide(),$(".themis-quiz-page").show()):$(".themis-quiz-page").hide(),$(".show-on-complete[quizId='"+this.quizId+"'], #themis-recommendation-reading-links_"+this.quizId).show()):($(".recommendations button").hide(),$(".show-on-complete[quizId='"+this.quizId+"'], #themis-recommendation-reading-links_"+this.quizId).hide())):($("#checkPoint-block_"+t).hide(),$(".recommendations button").hide());for(var m,h=$("#themis-checkpoint-content .doughnut"),p=0;p<h.length;p++)if("background-gray"==h[p].classList[5]){m=p;break}o<768?($("#themis-checkpoint-content .doughnut").hide(),$("#themis-checkpoint-content .doughnut.background-gray").show(),0==m?($(".prev-checkpoint-arrow.hidden-lg.hidden-md").hide(),$(".next-checkpoint-arrow.hidden-lg.hidden-md").show()):m==h.length-1?($(".next-checkpoint-arrow.hidden-lg.hidden-md").hide(),$(".prev-checkpoint-arrow.hidden-lg.hidden-md").show()):($(".next-checkpoint-arrow.hidden-lg.hidden-md").show(),$(".prev-checkpoint-arrow.hidden-lg.hidden-md").show())):o<1025&&o>991?($("#themis-checkpoint-content .doughnut").hide(),$(".prev-checkpoint-arrow.hidden-lg.hidden-md").hide(),$(".next-checkpoint-arrow.hidden-lg.hidden-md").hide(),$(".prev-checkpoint-arrow.hidden-xs").show(),$(".next-checkpoint-arrow.hidden-xs").show(),0==m?($("#themis-checkpoint-content .doughnut")[m].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+2].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+3].style.display="inline-block",$(".prev-checkpoint-arrow.hidden-xs").hide()):m==h.length-1?($("#themis-checkpoint-content .doughnut")[m].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-2].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-3].style.display="inline-block",$(".next-checkpoint-arrow.hidden-xs").hide()):3==m?($("#themis-checkpoint-content .doughnut")[m].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-2].style.display="inline-block"):($("#themis-checkpoint-content .doughnut")[m].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+2].style.display="inline-block")):o<992&&o>767?($("#themis-checkpoint-content .doughnut").hide(),$(".prev-checkpoint-arrow.hidden-lg.hidden-md").hide(),$(".next-checkpoint-arrow.hidden-lg.hidden-md").hide(),$(".prev-checkpoint-arrow.hidden-xs").show(),$(".next-checkpoint-arrow.hidden-xs").show(),0==m?($("#themis-checkpoint-content .doughnut")[m].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+2].style.display="inline-block",$(".prev-checkpoint-arrow.hidden-xs").hide()):m==h.length-1?($("#themis-checkpoint-content .doughnut")[m].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-2].style.display="inline-block",$(".next-checkpoint-arrow.hidden-xs").hide()):($("#themis-checkpoint-content .doughnut")[m].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m-1].style.display="inline-block",$("#themis-checkpoint-content .doughnut")[m+1].style.display="inline-block")):($("#themis-checkpoint-content .doughnut").show(),$(".prev-checkpoint-arrow.hidden-xs").hide(),$(".next-checkpoint-arrow.hidden-xs").hide()),$("#page-loading-spinner").hide(),$("#themis-loading-spinner-refresh").hide()}function getOverAlltUserQuizDetailsBySAId(e){CaseConnect.themisSubjectAreaId=e,"true"===comingFromRefreshThemis?$("#themis-loading-spinner-refresh").show():$("#page-loading-spinner").show();var t={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_CHECKPOINT_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",lastReadBookId:CaseConnect.currentBookId,themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},themisSubjectAreaVO:{themisSubjectAreaId:CaseConnect.themisSubjectAreaId}};$.ajax({url:properties[properties.env]+"/manageThemis/getOverAlltUserQuizDetailsBySAId",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(t)}).then(function(e){$(window).width();if("true"===comingFromRefreshThemis?$("#themis-loading-spinner-refresh").show():$("#page-loading-spinner").show(),void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),"true"===e.status)if($("#themis-landing-content-area").hide(),$("#themis-checkpoint-container").show(),void 0!==e.themisResultVOList){var t,i,a=e.themisResultVOList;"object"==$.type(a)&&(a=[a]);var s=a;quizId=s[0].quizId;for(var o=0;o<s.length;o++){t=s[o];var n=s[o].quizId;$(".doughnut[quizId="+n+"]").html(""),$(".doughnut[quizId="+n+"]").attr("quizStatus",t);var r=Handlebars.getTemplate("themis-checkpoint-doughnut-postquiz")(s[o]);$(".doughnut[quizId="+n+"]").html(r),$(".doughnut[quizId="+n+"]").attr({attemptId:t.attemptId,quizStatus:t.quizStatus,correct:t.correct,incorrect:t.incorrect}),$(checkPointsMetaDataByThemisSA).each(function(){n===this.quizId&&$(".dashboard-qns.skill-name[quizId="+this.quizId+"]").html(this.quizName)}),"Completed"===t.quizStatus&&(parseInt(t.correct)<70?$("#themis-recommendation-header_"+n+" p").html(themisPostQuizRecommendationVOSMF.sadLanguage):parseInt(t.correct)<100&&parseInt(t.correct)>60?$("#themis-recommendation-header_"+n+" p").html(themisPostQuizRecommendationVOSMF.mixedLanguage):100===parseInt(t.correct)&&$("#themis-recommendation-header_"+n+" p").html(themisPostQuizRecommendationVOSMF.happyLanguage))}if($(".checkPoint-block").show(),$(s).each(function(){var e=[],t=[],a=this.quizId,s=this.quizStatus;if(i=parseInt(this.unanswered),void 0!==this.themisDisplayResultVOList){var o=this.themisDisplayResultVOList;"object"==$.type(o)&&(o=[o]);var n=Handlebars.getTemplate("themis-quiz-details-topic")(o);$("#quiz-details-topics_"+this.quizId).html(n);var r=0;$(window).width()>767&&$(o).each(function(){var e=$("#quiz-details-topics_"+this.quizId+" .quiz-details-title");$(e).each(function(){this.clientHeight>r&&(r=this.clientHeight)}),0!==r&&($(e).height(r+"px"),r=0)})}if(void 0!==this.themisSkillSetResultVO){var l,d,c,u,m=this.themisSkillSetResultVO,h={},p=[];void 0!==this.themisPostQuizFundamentalConceptsRecommendationVOList&&"100"!==Math.round(i).toString()?(l=this.themisPostQuizFundamentalConceptsRecommendationVOList,"object"==$.type(l)&&(l=[l])):l="",void 0!==this.themisPostQuizImplementationRecommendationVOList&&"100"!==Math.round(i).toString()?(d=this.themisPostQuizImplementationRecommendationVOList,"object"==$.type(d)&&(d=[d])):d="",void 0!==this.themisPostQuizLeaglReasoningRecommendationVOList&&"100"!==Math.round(i).toString()?(c=this.themisPostQuizLeaglReasoningRecommendationVOList,"object"==$.type(c)&&(c=[c])):c="",void 0!==this.themisPostQuizImplementationRecommendationVOList&&"100"!==Math.round(i).toString()?(u=this.themisPostQuizProblemSolvingRecommendationVOList,"object"==$.type(u)&&(u=[u])):u="",void 0!==m.fundamentalConceptsScorePercentage&&(m.fundamentalConceptsScorePercentage=parseInt(m.fundamentalConceptsScorePercentage),p.push(m.fundamentalConceptsScorePercentage)),void 0!==m.implementationScorePercentage&&(m.implementationScorePercentage=parseInt(m.implementationScorePercentage),p.push(m.implementationScorePercentage)),void 0!==m.leaglReasoningScorePercentage&&(m.leaglReasoningScorePercentage=parseInt(m.leaglReasoningScorePercentage),p.push(m.leaglReasoningScorePercentage)),void 0!==m.problemSolvingScorePercentage&&(m.problemSolvingScorePercentage=parseInt(m.problemSolvingScorePercentage),p.push(m.problemSolvingScorePercentage)),h={fundamentalConceptsScorePercentage:m.fundamentalConceptsScorePercentage,implementationScorePercentage:m.implementationScorePercentage,leaglReasoningScorePercentage:m.leaglReasoningScorePercentage,problemSolvingScorePercentage:m.problemSolvingScorePercentage};for(var g,v=[];0!==p.length;)g=Math.min.apply(null,p),v.push(g),p.splice(p.indexOf(g),1);$(v).each(function(){void 0!==h.fundamentalConceptsScorePercentage&&this.toString()===h.fundamentalConceptsScorePercentage.toString()&&(e.push({title:"Foundational Concepts",scorePercentage:this.toString(),fundamentalConceptsScorePercentage:this.toString(),termVal:"fundamentalConcepts",quizId:a,totalUnanswered:i.toString(),postQuizRecommendation:l}),delete h.fundamentalConceptsScorePercentage),void 0!==h.implementationScorePercentage&&this.toString()===h.implementationScorePercentage.toString()&&(e.push({title:"Implementation",scorePercentage:this.toString(),implementationScorePercentage:this.toString(),termVal:"implementation",quizId:a,totalUnanswered:i.toString(),postQuizRecommendation:d}),delete h.implementationScorePercentage),void 0!==h.problemSolvingScorePercentage&&this.toString()===h.problemSolvingScorePercentage.toString()&&(e.push({title:"Problem Solving",scorePercentage:this.toString(),problemSolvingScorePercentage:this.toString(),termVal:"problemSolving",quizId:a,totalUnanswered:i.toString(),postQuizRecommendation:u}),delete h.problemSolvingScorePercentage),void 0!==h.leaglReasoningScorePercentage&&this.toString()===h.leaglReasoningScorePercentage.toString()&&(e.push({title:"Legal Reasoning",scorePercentage:this.toString(),leaglReasoningScorePercentage:this.toString(),termVal:"leaglReasoning",quizId:a,totalUnanswered:i.toString(),postQuizRecommendation:c}),delete h.leaglReasoningScorePercentage)}),t=[];for(var b=e.length,f=0;f<b;f++)0==t.length&&"fundamentalConcepts"===e[f].termVal&&t.push(e[f]);for(f=0;f<b;f++)1==t.length&&"implementation"===e[f].termVal&&t.push(e[f]);for(f=0;f<b;f++)2==t.length&&"problemSolving"===e[f].termVal&&t.push(e[f]);for(f=0;f<b;f++)3==t.length&&"leaglReasoning"===e[f].termVal&&t.push(e[f]);var C=Handlebars.getTemplate("themis-quiz-details-skill-building")(t);if($("#quiz-details-skill-building_"+this.quizId).html(C),globalComparisonVal=e,"Completed"===s){var S=Handlebars.getTemplate("themis-skills-meta")(e);$("#themis-recommendation-skill-building_"+this.quizId).html(S),$(".skills-name[quizId='"+this.quizId+"'] span.display-menu-toggle").removeClass("hidden"),$(".skills-name[quizId='"+this.quizId+"'] a.skill-clickable").removeClass("hide").addClass("show"),$(".skills-name[quizId='"+this.quizId+"'] a.skill-nonclickable").removeClass("show").addClass("hide"),$(".skills-desc").hide(),100===Math.round(parseInt(this.correct))?$("#skill-title-info_"+this.quizId).hide():displayTooltipRecommendation("skill",this.quizId),$(".show-on-complete[quizId='"+this.quizId+"'], #themis-recommendation-reading-links_"+this.quizId).show()}else""!==this.quizId&&$(".skills-name[quizId='"+this.quizId+"'] a").removeAttr("onclick"),$(".show-on-complete[quizId='"+this.quizId+"'], #themis-recommendation-reading-links_"+this.quizId).hide();var I=$("#quiz-details-skill-building_"+this.quizId);navigator.userAgent.match(/(iPad|Android|iPhone)/)||insideTouchDevices?trigger="click":trigger="hover",I.find(".quiz-details-title-elem").popover({placement:"top",trigger:trigger,template:'<div class="popover themis-skill-desc-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return $(this).parent().find(".skill-desc-content").html()}})}if(void 0!==this.themisPostQuizTopicRecommendationVOList){var w=this.themisPostQuizTopicRecommendationVOList;"object"==$.type(w)&&(w=[w]),loadPostQuizRecommendationTopic(w,a)}}),"false"===themisNavigationPopOverFlag?($(".themis-quiz-modal").hide(),$(".themis-quiz-page").show()):($(".themis-quiz-modal").show(),$(".themis-quiz-page").hide()),"true"===comingFromThemis)for(var l=CaseConnect.themisAttributes.quizId,d=$("#themis-checkpoint-content .doughnut").length,c=0;c<d;c++)l===$("#themis-checkpoint-content .doughnut")[c].getAttribute("quizId")&&$($("#themis-checkpoint-content .doughnut")[c]).trigger("click");else if(null!=themisLastVisitedQuizId){d=$("#themis-checkpoint-content .doughnut").length;for(var u=0;u<d;u++)if(themisLastVisitedQuizId===$("#themis-checkpoint-content .doughnut")[u].getAttribute("quizId")){$($("#themis-checkpoint-content .doughnut")[u]).trigger("click");break}}else $($("#themis-checkpoint-content .doughnut")[0]).trigger("click");$(window).trigger("resize")}else $($("#themis-checkpoint-content .doughnut")[0]).trigger("click"),$(window).trigger("resize");else $(window).trigger("resize"),$("#page-loading-spinner").hide(),$("#themis-loading-spinner-refresh").hide()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),$("#themis-loading-spinner-refresh").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function loadPostQuizRecommendationTopic(e,t){var i=e,a=(t=t,Handlebars.getTemplate("themis-display-meta")(i));$("#themis-recommendation-topic_"+t).html(a),$(".themis-recommendation-topic div.display-name").addClass("themis-listing-elem"),$(i).each(function(){$(".display-name-desc[displayId='"+this.displayId+"']").show(),$(".display-name[displayId='"+this.displayId+"'] span.display-menu-toggle").removeClass("hidden"),$(".display-name[displayId='"+this.displayId+"'] a").attr("onclick","showHideRecommendationInfo(this,'topic','"+this.displayId+"')").attr("displayId",this.displayId);for(var e,t=[],i=0;i<globalComparisonVal.length;i++)"fundamentalConcepts"===(e=globalComparisonVal[i].termVal)&&"0"!==this.totalFundamentalConceptsQuestions&&t.push({skillSetTitle:"fundamentalConcepts",correctCount:this.totalFundamentalConceptsQuestions.toString(),displayId:this.displayId,description:this.fundamentalConcepts}),"implementation"===e&&"0"!==this.totalImplementationQuestions&&t.push({skillSetTitle:"implementation",correctCount:this.totalImplementationQuestions.toString(),displayId:this.displayId,description:this.implementation}),"leaglReasoning"===e&&"0"!==this.totalLeaglReasoningQuestions&&t.push({skillSetTitle:"leaglReasoning",correctCount:this.totalLeaglReasoningQuestions.toString(),displayId:this.displayId,description:this.leaglReasoning}),"problemSolving"===e&&"0"!==this.totalProblemSolvingQuestions&&t.push({skillSetTitle:"problemSolving",correctCount:this.totalProblemSolvingQuestions.toString(),displayId:this.displayId,description:this.problemSolving});var a=Handlebars.getTemplate("themis-topic-desc")(t);$(".display-title-elems[quizId='"+this.quizId+"'][displayId='"+this.displayId+"']").html(a),100===Math.round(parseInt(this.correctAnswersPercentage))?$("#display-title-info_"+this.displayId).hide():displayTooltipRecommendation("topic",this.displayId)}),$(".display-name-desc").hide()}function displayTooltipRecommendation(e,t){currentInfoIconId=t;var i="hover";i=navigator.userAgent.match(/(iPad|Android|iPhone)/)?"click":"hover",$("#themis-content-info-icon_"+currentInfoIconId).popover({html:!0,trigger:i,placement:"top",container:"body",template:'<div class="popover themis-popover-wrapper ebook-custom-popover" infoIcon="'+currentInfoIconId+'"><div class="arrow menuArrow"></div><div class="popover-content themis-popover ereader-menu-popover"></div></div>',content:function(){return $("#recommendation-info-popover-content").html()}})}function closeThemisPopover(){$("#themis-content-info-icon_"+currentInfoIconId).popover("hide"),$("#themisStudQuizzes").popover("hide"),$("#themisAdminQuizzes").popover("hide"),$("#themisAdminCourses").popover("hide"),$(".quiz-details-title-elem[elem]").popover("hide")}function closeCqPopover(){$(".classAvg-container").popover("hide"),$("#myModalQuizSummary").modal("hide")}function closePpPopover(){$("#retakingModalSection").modal("hide")}function pickChoiceID(e){return null==e||null==e?"N/A":(e=parseInt(e)-1,fetchCrctAnsOption(e))}function showRecommendsFromCircle(e,t,i){e=e,t=t,i=i;var a=$(window).width();"skill"==e&&($("#topic-skill-building-block li a[recommendval=skill_"+t+"]").trigger("click"),$("#themis-recommendation-skill-building_"+t+" a[termVal="+i+"]").trigger("click"),$(window).trigger("resize"),(navigator.userAgent.match(/(iPad|Android|iPhone)/)||insideTouchDevices)&&a<768?$(window).scrollTop($("#themis-recommendation-skill-building_"+t+" .recommendation-desc[termVal="+i+t+"]").offset().top-40):-1!==$("#themis-bar").css("overflow").indexOf("scroll")?$("#themis-bar").scrollTo($("#themis-recommendation-skill-building_"+t+" .recommendation-desc[termVal="+i+t+"]")):$(window).scrollTop($("#themis-recommendation-skill-building_"+t+" .recommendation-desc[termVal="+i+t+"]").offset().top-100)),"topic"==e&&($("#topic-skill-building-block li a[recommendval=topic_"+t+"]").trigger("click"),$("#themis-recommendation-topic_"+t+" a[displayId="+i+"]").trigger("click"),$(window).trigger("resize"),(navigator.userAgent.match(/(iPad|Android|iPhone)/)||insideTouchDevices)&&a<768?$(window).scrollTop($("#themis-recommendation-topic_"+t+" .recommendation-desc[displayid="+i+"]").offset().top-40):-1!==$("#themis-bar").css("overflow").indexOf("scroll")?$("#themis-bar").scrollTo($("#themis-recommendation-topic_"+t+" .recommendation-desc[displayid="+i+"]")):$(window).scrollTop($("#themis-recommendation-topic_"+t+" .recommendation-desc[displayid="+i+"]").offset().top-100))}function showHideRecommendationInfo(e,t,i){var a=e,s=(t=t,$(window).width());$(a).children(".display-menu-toggle").toggleClass("glyphicon-chevron-down").toggleClass("glyphicon-chevron-right"),"topic"===t?$(".recommendation-desc[displayId="+i+"]").slideToggle("slow"):(t="skill")&&$(".recommendation-desc[termVal="+i+"]").slideToggle("slow"),s<768?$(".display-title-info").next(".display-title-elems").css("width","85%"):s>767&&s<992?$(".display-title-info").next(".display-title-elems").css("width","90%"):($(".display-title-info").next(".display-title-elems").css("width","94%"),$(".display-title-elems").css("margin-left","14px"),$(".display-title-info").next(".display-title-elems").children("p.themis-message:first-child").css("margin-left","25px"))}function tabChangeTopicSkill(e,t,i){var a=$(e);$("#topic-skill-building-block .titleTab").removeClass("tab-selected active"),a.addClass("tab-selected active"),"topic"==t?($("#themis-recommendation-topic_"+i).show(),$("#themis-recommendation-skill-building_"+i).hide(),adjustLeftNavHeight()):"skill"==t&&($("#themis-recommendation-topic_"+i).hide(),$("#themis-recommendation-skill-building_"+i).show(),adjustLeftNavHeight())}function updateViewBtn(e){$(e).hasClass("themis-light-button")?($(e).html("View Less").removeClass("themis-light-button").addClass("themis-dark-button"),$(".rmvClassstud").removeClass("student-progress-allUser-percents").addClass("student-progress-allUser-percent")):($(e).html("View More").removeClass("themis-dark-button").addClass("themis-light-button"),$(".rmvClassstud").removeClass("student-progress-allUser-percent").addClass("student-progress-allUser-percents"))}function showQuizAttempt(e){var t=e.currentTarget.getAttribute("quizId"),i=e.currentTarget.getAttribute("quizStatus"),a=e.currentTarget.getAttribute("attemptId");$("#themis-take-quiz-confirmation").modal("show");var s=e.currentTarget.innerHTML;"Completed"===i?($("#btn-take-quiz-continue").attr({quizId:t,attemptId:a}).hide(),$("#btn-review-quiz-continue").attr({quizId:t,attemptId:a}).show(),"Retake Quiz"===s?($(".retake").html("Retaking the quiz will erase the data from your previous attempt at this quiz."),$(".themis-modal-checkbox-container").hide()):($(".retake").html("You can return to this tab to continue your Casebook Connect session at any time."),$(".themis-modal-checkbox-container").show()),$(".show-on-complete[quizId='"+this.quizId+"'], #themis-recommendation-reading-links_"+this.quizId).show()):($("#btn-take-quiz-continue").attr({quizId:t,attemptId:a}).show(),$("#btn-review-quiz-continue").attr({quizId:t,attemptId:a}).hide(),"Retake Quiz"===s?($(".retake").html("Retaking the quiz will erase the data from your previous attempt at this quiz."),$(".themis-modal-checkbox-container").hide()):($(".retake").html("You can return to this tab to continue your Casebook Connect session at any time."),$(".themis-modal-checkbox-container").show()),$(".show-on-complete[quizId='"+this.quizId+"'], #themis-recommendation-reading-links_"+this.quizId).hide())}function takeQuiz(e){$("#page-loading-spinner").show();var t=e.currentTarget.getAttribute("quizId"),i={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_CHECKPOINT_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",lastReadBookId:CaseConnect.currentBookId,themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},themisCheckPointVO:{quizId:t}};$.ajax({url:properties[properties.env]+"/manageThemis/takeQuiz",type:"POST",contentType:"application/json",accept:"application/json",async:!1,data:JSON.stringify(i)}).then(function(e){$(window).width();if($("#page-loading-spinner").show(),void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),"true"===e.status){if(e.themisAuthToken){var i=e.themisAuthToken,a="";if(e.themisCheckPointVO&&e.themisCheckPointVO.attemptId){a=e.themisCheckPointVO.attemptId,CaseConnect.themisQuizAttemptId=a;var s=properties.themisUrl+"casebook-connect/quiz?quizId="+t+"&themisAuthToken="+i+"&userId="+localStorage.getItem("userId")+"&attemptId="+a+"&themisProductId="+CaseConnect.currentProductId+"&themisSAId="+CaseConnect.themisSubjectAreaId;window.open("","_blank","",!1).location.href=s,$("#page-loading-spinner").hide()}}$("#page-loading-spinner").hide()}else $("#page-loading-spinner").hide()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function reviewQuiz(e){$("#page-loading-spinner").show();var t=e.currentTarget.getAttribute("quizId"),i=e.currentTarget.getAttribute("attemptId"),a={userVO:{userId:localStorage.getItem("userId")}};$.ajax({url:properties[properties.env]+"/manageThemis/generateThemisAuthToken",type:"POST",contentType:"application/json",accept:"application/json",async:!1,data:JSON.stringify(a)}).then(function(e){$(window).width();if($("#page-loading-spinner").show(),void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),"true"===e.status){if(e.themisAuthToken){var a=e.themisAuthToken,s=i,o=properties.themisUrl+"casebook-connect/results?quizId="+t+"&themisAuthToken="+a+"&userId="+localStorage.getItem("userId")+"&attemptId="+s+"&themisProductId="+CaseConnect.currentProductId+"&themisSAId="+CaseConnect.themisSubjectAreaId;window.open("","_blank","",!1).location.href=o,$("#page-loading-spinner").hide()}$("#page-loading-spinner").hide()}else $("#page-loading-spinner").hide()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function skillBuildingModal(e){$("#bar-check-skill-modal").modal("show");var t=$(e.currentTarget).find(".skill-name")[0].innerText;$(".skill-modal-name")[0].innerText=t,$(".skill-modal-name")[1].innerText=t}function updateThemisNavigationPopOverFlag(){if($("#themis-nav-pop").prop("checked")){var e={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_CHECKPOINT_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",lastReadBookId:CaseConnect.currentBookId,themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")}},themisNavigationPopOverFlag:!1};$.ajax({url:properties[properties.env]+"/manageThemis/updateThemisNavigationPopOverFlag",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(e)}).then(function(e){$(window).width();void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken),"true"===e.status&&("false"===(themisNavigationPopOverFlag="false")?($(".themis-quiz-modal").hide(),$(".themis-quiz-page").show()):($(".themis-quiz-modal").show(),$(".themis-quiz-page").hide()))},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}}function incrementRadius(e){var t=window.innerWidth,i=(themisLandingPage||insideThemisStudProfile?84:t<1025&&t>991?47:t<992&&t>767?84:47)*(e=parseInt(e))/100;return Math.floor(i)}function roundToOne(e){var t=e.toString().split(".")[1];if(1===t.length&&"0"===t)var i=e.toString().split(".")[0];else i=parseFloat(e).toFixed(1);return parseFloat(i)}function showThemisSaMoblie(e){showAlphabetViewbar(),void 0!==$("#themis-sa-menu-mobile").data()["bs.modal"]?$("#themis-sa-menu-mobile").data()["bs.modal"].isShown?($("#themis-sa-menu-mobile").modal("hide"),$("div.ereader-page-info-modal-container .ereader-top-nav-cog").attr("onclick","showAccountMenuInMobile('"+e+"')"),$("div.common-book-info-modal-container .ereader-top-nav-cog").addClass("cc-header-account").removeClass("glyphicon glyphicon-remove")):($("#themis-sa-menu-mobile").modal("show"),$(".ereader-assessment-content-area").scrollTop(0),$("div.common-book-info-modal-container .ereader-top-nav-cog").removeClass("cc-header-account").addClass("glyphicon glyphicon-remove"),$("div.common-book-info-modal-container .ereader-top-nav-cog").attr("onclick","closeOverlayInMobile('"+e+"')")):($("#themis-sa-menu-mobile").modal("show"),$("div.common-book-info-modal-container .ereader-top-nav-cog").removeClass("cc-header-account").addClass("glyphicon glyphicon-remove"),$("div.common-book-info-modal-container .ereader-top-nav-cog").attr("onclick","closeOverlayInMobile('"+e+"')")),$(".common-book-menu-dropdown").attr("onclick","showAccountMenuFromHamburger('"+e+"');")}function closeThemisMenuModal(e){$("#"+e).modal("hide"),$("#themis-nav-menu-mobile").data()["bs.modal"].isShown?"none"===$(".mobile-read-menu-dropdown").css("display")&&(e="themis-nav-menu-mobile",$("div.common-book-info-modal-container .ereader-top-nav-cog").addClass("cc-header-account").removeClass("glyphicon glyphicon-remove"),$("div.common-book-info-modal-container .ereader-top-nav-cog").attr("onclick","showAccountMenuInMobile('"+e+"')"),$(".common-book-menu-dropdown").attr("onclick","showAccountMenuFromHamburger('"+e+"');")):(e="themis-nav-menu-mobile",$("div.common-book-info-modal-container .ereader-top-nav-cog").addClass("cc-header-account").removeClass("glyphicon glyphicon-remove"),$("div.common-book-info-modal-container .ereader-top-nav-cog").attr("onclick","showAccountMenuInMobile('"+e+"')"),$(".common-book-menu-dropdown").attr("onclick","showAccountMenuFromHamburger('"+e+"');"))}function showAlphabetViewbar(){var e,t,i,a;for(document.getElementById("themis-header-nav-bar-mobile"),t=!0;t;){for(t=!1,i=$("ul#themis-header-nav-bar-mobile li.mobile-nav-li a"),e=0;e<i.length-1;e++)if(a=!1,i[e].innerHTML.toLowerCase()>i[e+1].innerHTML.toLowerCase()){a=!0;break}if(a){var s=i[e].parentElement.innerHTML,o=i[e+1].parentElement.innerHTML;i[e].parentElement.innerHTML=o,i[e+1].parentElement.innerHTML=s,t=!0}}$("ul#themis-header-nav-bar-mobile li.mobile-nav-li a").removeClass("border-bottom-blue");var n=localStorage.getItem("themisSaId");$("ul#themis-header-nav-bar-mobile li.mobile-nav-li a[themisSaId='"+n+"']").addClass("border-bottom-blue")}function themisStudentQuizzesPage(){$("#themisStudQuizzes").popover({html:!0,trigger:"click",placement:"bottom",container:"body",template:'<div class="popover themisStudQuizzes-popover" id="themisStudQuizzes-popover" aria-labelledby="popover-content" aria-describedby="popover-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content home-info-text" id="popover-content"></div></div>',content:function(){var e,t,i,a;for(map.overlay.css("opacity","0"),document.getElementById("navbar-ipad-ul"),t=!0;t;){for(t=!1,i=$("ul#navbar-ipad-ul li a"),e=0;e<i.length-1;e++)if(a=!1,i[e].innerHTML.toLowerCase()>i[e+1].innerHTML.toLowerCase()){a=!0;break}if(a){var s=i[e].parentElement.innerHTML,o=i[e+1].parentElement.innerHTML;i[e].parentElement.innerHTML=o,i[e+1].parentElement.innerHTML=s,t=!0}}return $("#navbar-ipad-ul").html()}})}function quizzesPage(){$("#themisAdminQuizzes").popover({html:!0,trigger:"click",placement:"bottom",container:"body",template:'<div class="popover themisAdminQuizzes-popover" id="themisAdminQuizzes-popover" aria-labelledby="popover-content" aria-describedby="popover-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content home-info-text" id="popover-content"></div></div>',content:function(){return map.overlay.css("opacity","0"),$("#navbar-ipad-ul .ipad-nav-li a").attr("onclick","getCheckPointsByThemisSA(event);"),$("#navbar-ipad-ul").html()}})}function coursesPage(){$("#themisAdminCourses").popover({html:!0,trigger:"click",placement:"bottom",container:"body",template:'<div class="popover themisAdminCourses-popover" id="themisAdminCourses-popover" aria-labelledby="popover-content" aria-describedby="popover-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content home-info-text" id="popover-content"></div></div>',content:function(){return map.overlay.css("opacity","0"),$("#navbar-ipad-ul .ipad-nav-li a").attr("onclick","onClickCourseTitle(event)"),$("#navbar-ipad-ul").html()}})}function onClickCourseTitle(e){if($(".modal-backdrop").remove(),$("#themis-admin-modal").modal("hide"),$(".modal-dialog").hide(),$("a#themisAdminCourses").popover("hide"),insideThemisStudProfile=!1,insideAdminQuiz=!1,insideThemisAdmin=!0,insideCQuizzing=!1,insidePracticePerfect=!1,insideThemis=!1,void 0===e||null==e)CaseConnect.themisSubjectAreaId=localStorage.getItem("themisSaId"),$(window).trigger("resize");else if("true"===(comingFromRefreshThemis=e.currentTarget.getAttribute("comingFromRefresh")))$("#themis-loading-spinner-refresh").css("opacity","1.0");else{comingFromRefreshThemis="false",CaseConnect.themisSubjectAreaId=e.currentTarget.getAttribute("themisSaId"),CaseConnect.currentBookId=e.currentTarget.getAttribute("bookId"),CaseConnect.bookType=e.currentTarget.getAttribute("bookType"),CaseConnect.resourceFlag=e.currentTarget.getAttribute("resourceFlag"),CaseConnect.casesFlag=e.currentTarget.getAttribute("casesFlag"),CaseConnect.newsFeedFlag=e.currentTarget.getAttribute("newsFeedFlag"),CaseConnect.themisCurrentSubjectAreaTitle=e.currentTarget.getAttribute("saTitle"),localStorage.setItem("CurrentSubjectAreaTitle",CaseConnect.themisCurrentSubjectAreaTitle),localStorage.setItem("themisSaId",CaseConnect.themisSubjectAreaId),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().children().removeClass("border-bottom-blue"),$(".navbar-ipad.courses").addClass("border-bottom-blue");var t=$(e.currentTarget).attr("themissaid");$("#themisSaId"+t).addClass("border-bottom-blue")}courseContentData()}function courseContentData(){$("#page-loading-spinner").show(),insideThemisAdmin=!0;var e={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_ADMIN_COURSE_LANDING_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId,themisSubjectAreaId:CaseConnect.themisSubjectAreaId}},t=$("#startFilter").val(),i=$("#endFilter").val();null!=t&&null!=t&&""!=t&&(e.themisProductVO.startDate=t+" 12:00 AM",e.userVO.userActivityVO.startDate=t+" 12:00 AM"),null!=i&&null!=i&&""!=i&&(e.themisProductVO.endDate=i+" 12:00 PM",e.userVO.userActivityVO.endDate=i+" 12:00 PM"),$.ajax({url:properties[properties.env]+"/manageThemis/getStudentCourseProgressByDateFilter",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(e)}).then(function(e){$(window).width();if("true"===e.status){if(("All_Active_users"==e.dateFilterValidationStatus||"Both_active_and_expired_users"==e.dateFilterValidationStatus||"All_expired_users"==e.dateFilterValidationStatus||"No_exam_data_available"==e.dateFilterValidationStatus||"No_active_users"==e.dateFilterValidationStatus)&&e.themisResultVOList){e.themisResultVOList;"object"==$.type(e.themisResultVOList)&&(e.themisResultVOList=[e.themisResultVOList]),map.wk_conatiner.load("themis-admin-landing.html?v6",function(){navBarAdmin(),quizzesPage(),coursesPage(),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag&&$(".resourceMenushow").removeClass("resourceMenuhide"),null!=localStorage.getItem("mbeAdminSchoolName")&&null!=localStorage.getItem("mbeAdminSchoolName")&&($(".nav-ipad-saTitleName.institution-name").html(localStorage.getItem("mbeAdminSchoolName")),$(".nav-ipad-saTitleName.institution-name").attr("title",localStorage.getItem("mbeAdminSchoolName")));var a=Handlebars.getTemplate("themis-bar-landing-courses")(e);$("#themis-course-admin-progress").html(a),$(".themis-admin-quiz-btn").attr("themisSaId",CaseConnect.themisSubjectAreaId),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$("#themis-admin-modal li a").removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().children().removeClass("border-bottom-blue"),$(".navbar-ipad.courses").addClass("border-bottom-blue"),$("#startFilter").removeClass("hasDatepicker"),$("#endFilter").removeClass("hasDatepicker"),$("#startFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#endFilter").datepicker("option","minDate",e)}}),$("#endFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#startFilter").datepicker("option","maxDate",e)}}),null!=t&&""!=t&&null!=t&&$("#startFilter").val(t),null!=i&&""!=i&&null!=i&&$("#endFilter").val(i),skillSetCalc(e.themisResultVOList,"course"),"All_Active_users"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html(""):"All_expired_users"==e.dateFilterValidationStatus?($(".courses-filter-results.themis-message p").html("No enrolled students for specified date range."),$("#selectOrderBy").parent().hide()):"No_exam_data_available"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No exam data available for specified date range."):"No_active_users"==e.dateFilterValidationStatus?($(".courses-filter-results.themis-message p").html("No active users for specified date range."),$("#selectOrderBy").parent().hide(),$(".course-list-hide").hide(),$(".orderByText").hide()):$(".courses-filter-results.themis-message p").html("Date range includes data from users with expired accounts."),generalList=e,"No_active_users"!=e.dateFilterValidationStatus?(highestPerformance=e.themisResultVOList,lowestPerformance=e.themisResultVOList,alphabetical=e.themisResultVOList,mostComplete=e.themisResultVOList,leastComplete=e.themisResultVOList,lowestPerformance=lowestPerformanceFunc(lowestPerformance),mostComplete=mostCompleteFunc(mostComplete),leastComplete=leastCompleteFunc(leastComplete),alphabetical=alphabeticalLastNameFunc(alphabetical),highestPerformance=exactJsonCourses(highestPerformance),lowestPerformance=exactJsonCourses(lowestPerformance),mostComplete=exactJsonCourses(mostComplete),leastComplete=exactJsonCourses(leastComplete),alphabetical=exactJsonCourses(alphabetical),quartileJsonPreparation("course"),themisStudentCourseProgressReport=e.themisResultVOList):themisStudentCourseProgressReport=[],courseStudentActiveStudents=e.activeStudents,institutionCumulativeAverageReport=e.institutionCumulativeAverage,$(window).trigger("resize"),$(".themis-admin-quiz-btn").attr("satitle",CaseConnect.themisCurrentSubjectAreaTitle),$(".themis-course-name").html(CaseConnect.themisCurrentSubjectAreaTitle),$("#navbar-ipad-ul li a").removeClass("border-bottom-blue"),$("#navbar-ipad-ul li a#"+CaseConnect.themisSubjectAreaId).addClass("border-bottom-blue"),$(window).trigger("resize"),$(".dwnLoadBtn").show()})}if(e.themisProductVO){if(e.themisProductVO.startDateInDateFormat){var a=separateDateTimeZon(e.themisProductVO.startDateInDateFormat);localStorage.setItem("excelStartDate",a)}else localStorage.removeItem("excelStartDate");if(e.themisProductVO.endDateInDateFormat){var s=separateDateTimeZon(e.themisProductVO.endDateInDateFormat);localStorage.setItem("excelEndDate",s)}else localStorage.removeItem("excelEndDate")}$("#page-loading-spinner").hide()}},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function updateViewBtninCoursePage(e){var t=$(e);t.hasClass("themis-light-button")?($(e).html("View Less").removeClass("themis-light-button").addClass("themis-dark-button"),t.hasClass("alreadyClicked")||(viewMoreInCourses(t),t.addClass("alreadyClicked"))):$(e).html("View More").removeClass("themis-dark-button").addClass("themis-light-button")}function updateViewBtninInstitution(e){$(e).hasClass("themis-light-button")?$(e).html("View Less").removeClass("themis-light-button").addClass("themis-dark-button"):$(e).html("View More").removeClass("themis-dark-button").addClass("themis-light-button")}function viewMoreInCourses(e){$("#page-loading-spinner").show(),insideThemisAdmin=!0;var t={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_ADMIN_COURSE_LANDING_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId,themisSubjectAreaId:CaseConnect.themisSubjectAreaId},userSearchVO:{userId:e[0].getAttribute("userid")}},i=$("#startFilter").val(),a=$("#endFilter").val();null!=i&&null!=i&&""!=i&&(t.themisProductVO.startDate=i+" 12:00 AM",t.userVO.userActivityVO.startDate=i+" 12:00 AM"),null!=a&&null!=a&&""!=a&&(t.themisProductVO.endDate=a+" 12:00 PM",t.userVO.userActivityVO.endDate=a+" 12:00 PM"),$.ajax({url:properties[properties.env]+"/manageThemis/getStudentCourseTopicProgressByDateFilter",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(t)}).then(function(t){if("true"===t.status){if(t.themisResultVOList){t.themisResultVOList;"object"==$.type(t.themisResultVOList)&&(t.themisResultVOList=[t.themisResultVOList]);var s=Handlebars.getTemplate("themis-courses-stud-data")(t);$("#themis-landing-course-sa-"+e[0].getAttribute("userid")).html(s),null!=i&&""!=i&&null!=i&&$("#startFilter").val(i),null!=a&&""!=a&&null!=a&&$("#endFilter").val(a)}else alertMessagesModal("data is not present");$("#page-loading-spinner").hide()}},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function themisStudentProfile(){$(".modal-backdrop").remove(),$("#themis-admin-modal").modal("hide"),$("#page-loading-spinner").show(),insideThemisStudProfile=!1,insideAdminQuiz=!1,insideThemisAdmin=!0,insideThemis=!1;var e={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_ADMIN_STUDENT_LANDING_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId}},t=$("#startFilter").val(),i=$("#endFilter").val();null!=t&&null!=t&&""!=t&&(e.themisProductVO.startDate=t+" 12:00 AM",e.userVO.userActivityVO.startDate=t+" 12:00 AM"),null!=i&&null!=i&&""!=i&&(e.themisProductVO.endDate=i+" 12:00 PM",e.userVO.userActivityVO.endDate=i+" 12:00 PM"),$.ajax({url:properties[properties.env]+"/manageThemis/getStudentsOverallProgress",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(e)}).then(function(e){if("true"===e.status){if(("All_Active_users"==e.dateFilterValidationStatus||"Both_active_and_expired_users"==e.dateFilterValidationStatus||"All_expired_users"==e.dateFilterValidationStatus||"No_exam_data_available"==e.dateFilterValidationStatus||"No_active_users"==e.dateFilterValidationStatus)&&e.themisResultVOList){e.themisResultVOList;"object"==$.type(e.themisResultVOList)&&(e.themisResultVOList=[e.themisResultVOList]),themisStudentDynamicReport=e.themisResultVOList,map.wk_conatiner.load("themis-admin-landing.html?v6",function(){navBarAdmin(),coursesPage(),quizzesPage(),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad.institution").addClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag&&$(".resourceMenushow").removeClass("resourceMenuhide"),null!=localStorage.getItem("mbeAdminSchoolName")&&null!=localStorage.getItem("mbeAdminSchoolName")&&($(".nav-ipad-saTitleName.institution-name").html(localStorage.getItem("mbeAdminSchoolName")),$(".nav-ipad-saTitleName.institution-name").attr("title",localStorage.getItem("mbeAdminSchoolName"))),totalRegisteredUser=e.totalRegisteredStudents;var a=Handlebars.getTemplate("themis-bar-landing-students")(e);$("#themis-course-admin-progress").html(a),skillSetCalc(e.themisResultVOList,"student"),$("#startFilter").removeClass("hasDatepicker"),$("#endFilter").removeClass("hasDatepicker"),$("#startFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#endFilter").datepicker("option","minDate",e)}}),$("#endFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#startFilter").datepicker("option","maxDate",e)}}),null!=t&&""!=t&&null!=t&&$("#startFilter").val(t),null!=i&&""!=i&&null!=i&&$("#endFilter").val(i),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().children().removeClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$("#themis-admin-modal li a").removeClass("border-bottom-blue"),$(".navbar-ipad.students").addClass("border-bottom-blue"),"All_Active_users"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html(""):"All_expired_users"==e.dateFilterValidationStatus?($(".courses-filter-results.themis-message p").html("No enrolled students for specified date range."),$("#selectOrderBy").parent().hide()):"No_exam_data_available"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No exam data available for specified date range."):"No_active_users"==e.dateFilterValidationStatus?($(".courses-filter-results.themis-message p").html("No active users for specified date range."),$("#selectOrderBy").parent().hide(),$(".stud-list-hide").hide(),$(".orderByText").hide()):"All_expired_users"==e.dateFilterValidationStatus?($(".courses-filter-results.themis-message p").html("No enrolled students for specified date range."),$("#selectOrderBy").parent().hide()):$(".courses-filter-results.themis-message p").html("Date range includes data from users with expired accounts."),generalList=e,"No_active_users"!=e.dateFilterValidationStatus?(highestPerformance=e.themisResultVOList,lowestPerformance=e.themisResultVOList,alphabetical=e.themisResultVOList,mostComplete=e.themisResultVOList,leastComplete=e.themisResultVOList,lowestPerformance=lowestPerformanceFunc(lowestPerformance),mostComplete=mostCompleteFunc(mostComplete),leastComplete=leastCompleteFunc(leastComplete),alphabetical=alphabeticalLastNameFunc(alphabetical),highestPerformance=exactJsonStudent(highestPerformance),lowestPerformance=exactJsonStudent(lowestPerformance),mostComplete=exactJsonStudent(mostComplete),leastComplete=exactJsonStudent(leastComplete),alphabetical=exactJsonStudent(alphabetical),quartileJsonPreparation("student")):(themisStudentDynamicReport=[],highestPerformance={},alphabetical={},lowestPerformance={},mostComplete={},leastComplete={}),$(window).trigger("resize"),$(".dwnLoadBtn").show()})}if(e.themisProductVO){if(e.themisProductVO.startDateInDateFormat){var a=separateDateTimeZon(e.themisProductVO.startDateInDateFormat);localStorage.setItem("excelStartDate",a)}else localStorage.removeItem("excelStartDate");if(e.themisProductVO.endDateInDateFormat){var s=separateDateTimeZon(e.themisProductVO.endDateInDateFormat);localStorage.setItem("excelEndDate",s)}else localStorage.removeItem("excelEndDate")}$("#page-loading-spinner").hide()}},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function loadThemisBarInstitution(){var e=$("#startFilter").val(),t=$("#endFilter").val();insideThemisAdmin=!0,insideThemis=!1;e=$("#startFilter").val(),t=$("#endFilter").val();$("#instupage-loading-spinner").show(),CaseConnect.themisCurrentSubjectAreaTitle="",$("#themis-sa-menu-mobile").modal("hide"),$("#themis-nav-menu-mobile").modal("hide");var i={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_ADMIN_INSTITUTION_LANDING_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId}};null!=e&&null!=e&&""!=e&&(i.themisProductVO.startDate=e+" 12:00 AM",i.userVO.userActivityVO.startDate=e+" 12:00 AM"),null!=t&&null!=t&&""!=t&&(i.themisProductVO.endDate=t+" 12:00 PM",i.userVO.userActivityVO.endDate=t+" 12:00 PM"),$.ajax({url:properties[properties.env]+"/manageThemis/getUniversityProgressByDateFilter",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(i)}).then(function(i){if("true"===i.status){if(i.themisResultVOList){"object"==$.type(i.themisResultVOList)&&(i.themisResultVOList=[i.themisResultVOList]);for(var a=0;a<i.themisResultVOList.length;a++){var s=i.themisResultVOList[a].attemptedDate.split(" ")[0].split("-");i.themisResultVOList[a].attemptedDate=s[1]+"/"+s[2]+"/"+s[0]}}i.themisSkillSetResultVOList||(i.themisSkillSetResultVOList={fundamentalConceptsScore:"0",implementationScore:"0",leaglReasoningScore:"0",problemSolvingScore:"0"});var o=Handlebars.getTemplate("themisSkill-ReportSection")(i);$("#skillSection").html(o);var n=$("#skillSection .quiz-details-title");navigator.userAgent.match(/(iPad|Android|iPhone)/)||insideTouchDevices?trigger="click":trigger="hover",n.find(".quiz-details-title-elem").popover({placement:"top",trigger:trigger,template:'<div class="popover themis-skill-desc-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return $(this).parent().find(".skill-desc-content").html()}}),null!=e&&""!=e&&null!=e&&$("#startFilter").val(e),null!=t&&""!=t&&null!=t&&$("#endFilter").val(t),kendoChartUserData=i.themisResultVOList,createChart(),$(window).trigger("resize")}else $("#page-loading-spinner").hide();sessionTimeOut()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#themis-loading-spinner-refresh").hide(),$("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function createChart(){var e="";if(null!=kendoChartUserData&&null!=kendoChartUserData?e=1==kendoChartUserData.length?"line":"area":(e="weeks",kendoChartUserData=""),$("#chart").kendoChart({legend:{visible:!0,position:"top"},series:[{opacity:1,type:e,aggregate:"avg",field:"universityAverage",data:kendoChartUserData,line:{style:"smooth"},categoryField:"attemptedDate"}],render:function(e){$("#instupage-loading-spinner").hide()},tooltip:{visible:!0,shared:!0,template:"#= kendo.toString(category, 'MMMM dd, yyyy')# <br> #if(dataItem.activeUsers==null){# Daily Active Students: 0 #}else{# Daily Active Students: #= dataItem.activeUsers # #}# <br>#if(dataItem.universityAverage==null){# Daily Average: Not Applicable #}else{# Daily Average: #= Math.round(parseFloat(dataItem.universityAverage)) #% #}#"},categoryAxis:{baseUnit:"days",majorGridLines:{visible:!1},type:"date",labels:{rotation:{angle:45}}},valueAxis:{majorUnit:50,max:100,min:0,width:3},majorTicks:{visible:!1}}),null!=kendoChartUserData&&null!=kendoChartUserData&&""!=kendoChartUserData&&null!=$("#chart").data("kendoChart")&&null!=$("#chart").data("kendoChart")){var t=$("#chart").data("kendoChart").options.categoryAxis,i=new Date(kendoChartUserData[0].attemptedDate),a=new Date(kendoChartUserData[kendoChartUserData.length-1].attemptedDate),s=Math.abs(a.getTime()-i.getTime()),o=Math.ceil(s/864e5),n=window.innerWidth;t.labels.step=n<1024?o:o>30?7:0}}function courseProgressInstitution(e){$(".modal-backdrop").remove(),$("#themis-admin-modal").modal("hide"),$("#page-loading-spinner").show(),insideThemisStudProfile=!1,insideAdminQuiz=!1,insideThemisAdmin=!0,insideThemis=!1;var t={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),schoolId:localStorage.getItem("mbeAdminSchoolId"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_ADMIN_INSTITUTION_LANDING_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:"",themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId}},i=$("#startFilter").val(),a=$("#endFilter").val();null!=i&&null!=i&&""!=i&&(t.themisProductVO.startDate=i+" 12:00 AM",t.userVO.userActivityVO.startDate=i+" 12:00 AM"),null!=a&&null!=a&&""!=a&&(t.themisProductVO.endDate=a+" 12:00 PM",t.userVO.userActivityVO.endDate=a+" 12:00 PM"),$.ajax({url:properties[properties.env]+"/manageThemis/getUniversityCourseProgressByDateFilter",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(t)}).then(function(e){if("true"===e.status){if("All_Active_users"==e.dateFilterValidationStatus||"Both_active_and_expired_users"==e.dateFilterValidationStatus||"All_expired_users"==e.dateFilterValidationStatus||"No_active_users"==e.dateFilterValidationStatus||"No_exam_data_available"==e.dateFilterValidationStatus)if(e.themisSubjectAreaVOList){e.themisSubjectAreaVOList;"object"==$.type(e.themisSubjectAreaVOList)&&(e.themisSubjectAreaVOList=[e.themisSubjectAreaVOList]);for(var t=0;t<e.themisSubjectAreaVOList.length;t++)if(e.themisSubjectAreaVOList[t].themisResultVOList){"object"==$.type(e.themisSubjectAreaVOList[t].themisResultVOList)&&(e.themisSubjectAreaVOList[t].themisResultVOList=[e.themisSubjectAreaVOList[t].themisResultVOList]);for(var s=0;s<e.themisSubjectAreaVOList[t].themisResultVOList.length;s++)e.themisSubjectAreaVOList[t].themisResultVOList[s].themisDisplayResultVOList&&"object"==$.type(e.themisSubjectAreaVOList[t].themisResultVOList[s].themisDisplayResultVOList)&&(e.themisSubjectAreaVOList[t].themisResultVOList[s].themisDisplayResultVOList=[e.themisSubjectAreaVOList[t].themisResultVOList[s].themisDisplayResultVOList])}themisSubjectAreaVOListForReport=e.themisSubjectAreaVOList,map.wk_conatiner.load("themis-admin-landing.html?v5",function(){navBarAdmin(),coursesPage(),quizzesPage(),$(".no-data-present-institution").hide(),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad.institution").addClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag&&$(".resourceMenushow").removeClass("resourceMenuhide"),null!=localStorage.getItem("mbeAdminSchoolName")&&null!=localStorage.getItem("mbeAdminSchoolName")&&($(".nav-ipad-saTitleName.institution-name").html(localStorage.getItem("mbeAdminSchoolName")),$(".nav-ipad-saTitleName.institution-name").attr("title",localStorage.getItem("mbeAdminSchoolName"))),totalRegisteredUser=e.totalRegisteredStudents;var t=Handlebars.getTemplate("themis-bar-landing-institution")(e);$("#themis-course-admin-progress").html(t),null!=i&&""!=i&&null!=i&&$("#startFilter").val(i),null!=a&&""!=a&&null!=a&&$("#endFilter").val(a),loadThemisBarInstitution(),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$("#themis-admin-modal li a").removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().children().removeClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$(".navbar-ipad.institution").addClass("border-bottom-blue"),"All_Active_users"==e.dateFilterValidationStatus?($(".courses-filter-results.themis-message p").html(""),$(".dwnLoadBtn").show()):"No_active_users"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No active users for specified date range."):"No_exam_data_available"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No exam data available for specified date range."):"All_expired_users"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No enrolled students for specified date range."):($(".courses-filter-results.themis-message p").html("Date range includes data from users with expired accounts."),$(".dwnLoadBtn").show()),$("#startFilter").removeClass("hasDatepicker"),$("#endFilter").removeClass("hasDatepicker"),$("#startFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#endFilter").datepicker("option","minDate",e)}}),$("#endFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#startFilter").datepicker("option","maxDate",e)}}),$(window).trigger("resize"),"All_Active_users"==e.dateFilterValidationStatus||"Both_active_and_expired_users"==e.dateFilterValidationStatus?(generalList=e,highestPerformance=e.themisSubjectAreaVOList,lowestPerformance=e.themisSubjectAreaVOList,alphabetical=e.themisSubjectAreaVOList,mostComplete=e.themisSubjectAreaVOList,leastComplete=e.themisSubjectAreaVOList,lowestPerformance=lowestPerformanceFunc(lowestPerformance),mostComplete=mostComplete.slice().sort(function(e,t){return z1=parseFloat(e.averageAnsweredQuestions),z2=parseFloat(t.averageAnsweredQuestions),(null===z1)-(null===z2)||-(z1>z2)||+(z1<z2)}),leastComplete=leastComplete.slice().sort(function(e,t){return z1=parseFloat(e.averageAnsweredQuestions),z2=parseFloat(t.averageAnsweredQuestions),(null===z1)-(null===z2)||+(z1>z2)||-(z1<z2)}),alphabetical=alphabetical.slice().sort(function(e,t){return c1=e.subjectAreaName.toLowerCase(),c2=t.subjectAreaName.toLowerCase(),c1<c2?-1:c1>c2?1:0}),highestPerformance=exactJsonInstitution(highestPerformance),lowestPerformance=exactJsonInstitution(lowestPerformance),mostComplete=exactJsonInstitution(mostComplete),leastComplete=exactJsonInstitution(leastComplete),alphabetical=exactJsonInstitution(alphabetical)):(highestPerformance={},alphabetical={},lowestPerformance={},mostComplete={},leastComplete={}),$(window).trigger("resize")})}else map.wk_conatiner.load("themis-admin-landing.html?v5",function(){navBarAdmin(),coursesPage(),quizzesPage(),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad.institution").addClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag&&$(".resourceMenushow").removeClass("resourceMenuhide"),null!=localStorage.getItem("mbeAdminSchoolName")&&null!=localStorage.getItem("mbeAdminSchoolName")&&($(".nav-ipad-saTitleName.institution-name").html(localStorage.getItem("mbeAdminSchoolName")),$(".nav-ipad-saTitleName.institution-name").attr("title",localStorage.getItem("mbeAdminSchoolName"))),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$("#themis-admin-modal li a").removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().children().removeClass("border-bottom-blue"),$(".navbar-ipad.institution").addClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),e.themisSubjectAreaVOList=CaseConnect.themisSubjectAreaVOList,themisSubjectAreaVOListForReport=e.themisSubjectAreaVOList;var t=Handlebars.getTemplate("themis-bar-landing-institution")(e);$("#themis-course-admin-progress").html(t),null!=i&&""!=i&&null!=i&&$("#startFilter").val(i),null!=a&&""!=a&&null!=a&&$("#endFilter").val(a),loadThemisBarInstitution(),"All_Active_users"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html(""):"No_active_users"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No active users for specified date range."):"No_exam_data_available"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No exam data available for specified date range."):"All_expired_users"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No enrolled students for specified date range."):$(".courses-filter-results.themis-message p").html("Date range includes data from users with expired accounts."),highestPerformance={},alphabetical={},lowestPerformance={},mostComplete={},leastComplete={},$(window).trigger("resize")});if(e.themisProductVO){if(e.themisProductVO.startDateInDateFormat){var o=separateDateTimeZon(e.themisProductVO.startDateInDateFormat);localStorage.setItem("excelStartDate",o)}else localStorage.removeItem("excelStartDate");if(e.themisProductVO.endDateInDateFormat){var n=separateDateTimeZon(e.themisProductVO.endDateInDateFormat);localStorage.setItem("excelEndDate",n)}else localStorage.removeItem("excelEndDate")}$("#page-loading-spinner").hide()}else $("#page-loading-spinner").hide()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function studProfile(e){var t,i;null==e||null==e?(t=$(".studProfileApply").attr("userid"),i=$(".studName").html()):(t=e.currentTarget.getAttribute("userid"),i=$(e.currentTarget).children().html());var a=$("#startFilter").val(),s=$("#endFilter").val();localStorage.setItem("studName",i),$("#page-loading-spinner").show(),insideThemisAdmin=!0,insideThemisStudProfile=!0,insideAdminQuiz=!1;var o={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_ADMIN_STUDENT_PROFILE_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,themisStudentProfileUserId:t,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId},userSearchVO:{userId:t}};null!=a&&null!=a&&""!=a&&(o.themisProductVO.startDate=a+" 12:00 AM",o.userVO.userActivityVO.startDate=a+" 12:00 AM"),null!=s&&null!=s&&""!=s&&(o.themisProductVO.endDate=s+" 12:00 PM",o.userVO.userActivityVO.endDate=s+" 12:00 PM"),$.ajax({url:properties[properties.env]+"/manageThemis/getStudentProfile",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(o)}).then(function(e){if("false"===e.status)sessionAuthFails(e),Utility.hideSpinner();else{void 0!==e.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",e.sessionAuthenticationToken);if(e.themisSubjectAreaVOList){var o=e.themisSubjectAreaVOList;if("object"==$.type(o)&&(o=[o]),CaseConnect.themisSubjectAreaVOList=o,localStorage.setItem("saVOList",JSON.stringify(CaseConnect.themisSubjectAreaVOList)),$("#page-loading-spinner").show(),$("#bookshelf-nav-menu-mobile").modal("hide"),$("#ereader-nav-menu-mobile").modal("hide"),$("#outline-nav-menu-mobile").modal("hide"),$("#study-nav-menu-mobile").modal("hide"),$("#cases-nav-menu-mobile").modal("hide"),$("#generic-nav-menu-mobile").modal("hide"),$("#news-feed-nav-mobile").modal("hide"),insideResourcePage=!1,insideClassInsightsPage=!1,insideStudycenterPage=!1,insideNewsFeed=!1,insideEreader=!1,insideStudy=!1,insideStaticPage=!1,insideCasesPage=!1,insideOutline=!1,insideBookshelf=!1,insideGlobalSearchResult=!1,insideBarCheck=!1,themisLandingPage=!1,insideThemisStudProfile=!0,insideAdminQuiz=!1,insideThemis=!1,insideThemisAdmin=!0,insideCQuizzing=!1,insidePracticePerfect=!1,CaseConnect.newsFeedFlag=!1,CaseConnect.resourceFlag=!1,$(".ereader-main-header-title").html(""),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"===comingFromThemis)return void getCheckPointsByThemisSA();var n=Handlebars.getTemplate("themis-bar-landing-studProfile")(e);if($("#themis-course-admin-progress").html(n),$(".studName").html(i),$(".studProfileApply").attr("userid",t),void 0!==e.themisSubjectAreaVOList){o=e.themisSubjectAreaVOList;"object"==$.type(o)&&(o=[o]);for(var r=0;r<o.length;r++)if(void 0!==o[r].themisResultVOList){var l=o[r].themisResultVOList;"object"==$.type(l)&&(l=[l]);for(var d=0,c=0;c<l.length;c++)"In Progress"===l[c].quizStatus&&d++;d===l.length&&$(".themis-sa-radio-selector button[subjectAreaId='"+o[r].subjectAreaId+"']").hide()}}$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),null!=a&&""!=a&&null!=a&&$("#startFilter").val(a),null!=s&&""!=s&&null!=s&&$("#endFilter").val(s),"All_Active_users"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html(""):"No_exam_data_available"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No exam data available for specified date range."):$(".courses-filter-results.themis-message p").html("Date range includes data from users with expired accounts."),getStudentBarOMeter(t),$(window).trigger("resize")}else map.wk_conatiner.load("themis-admin-landing.html?v5",function(){navBarAdmin(),coursesPage(),quizzesPage(),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad.institution").addClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag&&$(".resourceMenushow").removeClass("resourceMenuhide"),null!=localStorage.getItem("mbeAdminSchoolName")&&null!=localStorage.getItem("mbeAdminSchoolName")&&($(".nav-ipad-saTitleName.institution-name").html(localStorage.getItem("mbeAdminSchoolName")),$(".nav-ipad-saTitleName.institution-name").attr("title",localStorage.getItem("mbeAdminSchoolName"))),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().removeClass("border-bottom-blue"),$(".navbar-ipad-section").children().children().children().removeClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$("#themis-admin-modal li a").removeClass("border-bottom-blue"),$("#themis-course-admin-progress").html($(".no-data-present-studProf")[0].outerHTML),$("#themis-course-admin-progress .no-data-present-studProf").show(),"No_exam_data_available"==e.dateFilterValidationStatus?$(".courses-filter-results.themis-message p").html("No exam data available for specified date range."):$(".courses-filter-results.themis-message p").html("Date range includes data from users with expired accounts."),$("#startFilter").removeClass("hasDatepicker"),$("#endFilter").removeClass("hasDatepicker"),$("#startFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#endFilter").datepicker("option","minDate",e)}}),$("#endFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#startFilter").datepicker("option","maxDate",e)}}),null!=a&&""!=a&&null!=a&&$("#startFilter").val(a),null!=s&&""!=s&&null!=s&&$("#endFilter").val(s),$(".studName").html(localStorage.getItem("studName"))})}},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function getUniversityTopicProgressBySA(e){$("#page-loading-spinner").show(),insideThemisStudProfile=!1,insideAdminQuiz=!1,insideThemisAdmin=!0,insideThemis=!1;var t={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),schoolId:localStorage.getItem("mbeAdminSchoolId"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_ADMIN_COURSE_LANDING_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:e,themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId},themisSubjectAreaVO:{themisSubjectAreaId:e}},i=$("#startFilter").val(),a=$("#endFilter").val();null!=i&&null!=i&&""!=i&&(t.themisProductVO.startDate=i+" 12:00 AM",t.userVO.userActivityVO.startDate=i+" 12:00 AM"),null!=a&&null!=a&&""!=a&&(t.themisProductVO.endDate=a+" 12:00 PM",t.userVO.userActivityVO.endDate=a+" 12:00 PM"),$.ajax({url:properties[properties.env]+"/manageThemis/getUniversityTopicProgressBySAId",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(t)}).then(function(e){if("true"===e.status)if(e.themisResultVOList){"object"==$.type(e.themisResultVOList)&&(e.themisResultVOList=[e.themisResultVOList]);var t=Handlebars.getTemplate("themis-courses-stud-data")(e);$("#topicsRes").html(t),$("#page-loading-spinner").hide()}else $("#page-loading-spinner").hide();else $("#page-loading-spinner").hide()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function orderByFilter(e,t){var i,a,s=$("#selectOrderBy").val(),o=$("#startFilter").val(),n=$("#endFilter").val(),r=$(".courses-filter-results").html(),l=$("#skillSection").html();"institution"==t?i=Handlebars.getTemplate("themis-bar-landing-institution"):"course"==t?i=Handlebars.getTemplate("themis-bar-landing-courses"):"student"==t&&(i=Handlebars.getTemplate("themis-bar-landing-students")),"1"==s?(a=i(highestPerformance),"institution"==t?themisSubjectAreaVOListForReport=highestPerformance.themisSubjectAreaVOList:"course"==t?themisStudentCourseProgressReport=highestPerformance.themisResultVOList:"student"==t&&(themisStudentDynamicReport=highestPerformance.themisResultVOList)):"2"==s?(a=i(lowestPerformance),"institution"==t?themisSubjectAreaVOListForReport=lowestPerformance.themisSubjectAreaVOList:"course"==t?themisStudentCourseProgressReport=lowestPerformance.themisResultVOList:"student"==t&&(themisStudentDynamicReport=lowestPerformance.themisResultVOList)):"3"==s?(a=i(mostComplete),"institution"==t?themisSubjectAreaVOListForReport=mostComplete.themisSubjectAreaVOList:"course"==t?themisStudentCourseProgressReport=mostComplete.themisResultVOList:"student"==t&&(themisStudentDynamicReport=mostComplete.themisResultVOList)):"4"==s?(a=i(leastComplete),"institution"==t?themisSubjectAreaVOListForReport=leastComplete.themisSubjectAreaVOList:"course"==t?themisStudentCourseProgressReport=leastComplete.themisResultVOList:"student"==t&&(themisStudentDynamicReport=leastComplete.themisResultVOList)):"5"==s&&(a=i(alphabetical),"institution"==t?themisSubjectAreaVOListForReport=alphabetical.themisSubjectAreaVOList:"course"==t?themisStudentCourseProgressReport=alphabetical.themisResultVOList:"student"==t&&(themisStudentDynamicReport=alphabetical.themisResultVOList)),$("#themis-course-admin-progress").html(a),$("#skillSection").html(l),"course"==t&&(openTab(e,"studRes"),$(".nav-item-students-tab a").addClass("tab-selected"),getUniversityTopicProgressBySA(CaseConnect.themisSubjectAreaId));var d=$("#skillSection .quiz-details-title");navigator.userAgent.match(/(iPad|Android|iPhone)/)||insideTouchDevices?trigger="click":trigger="hover",d.find(".quiz-details-title-elem").popover({placement:"top",trigger:trigger,template:'<div class="popover themis-skill-desc-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return $(this).parent().find(".skill-desc-content").html()}}),$(".courses-filter-results").html(r),$("#startFilter").removeClass("hasDatepicker"),$("#endFilter").removeClass("hasDatepicker"),$("#startFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#endFilter").datepicker("option","minDate",e)}}),$("#endFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#startFilter").datepicker("option","maxDate",e)}}),null!=o&&""!=o&&null!=o&&$("#startFilter").val(o),null!=n&&""!=n&&null!=n&&$("#endFilter").val(n),$("#selectOrderBy").val(s),"institution"==t?($("#instupage-loading-spinner").show(),createChart()):"course"==t?($(".themis-admin-quiz-btn").attr("satitle",localStorage.getItem("CurrentSubjectAreaTitle")),$(".themis-course-name").html(localStorage.getItem("CurrentSubjectAreaTitle"))):"student"==t&&$(".studName").html(localStorage.getItem("studName")),"course"==t?quartileJsonPreparation("course"):"student"==t&&quartileJsonPreparation("student"),$(window).trigger("resize")}function navBarAdmin(){var e={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),schoolId:localStorage.getItem("mbeAdminSchoolId"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_PRODUCT_LANDING_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:"",themisProductId:CaseConnect.currentProductId,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId,enableComparison:!0}};$.ajax({url:properties[properties.env]+"/manageThemis/getAllSAByProductIdForCoursesTab",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(e)}).then(function(e){if("true"===e.status){if(e.themisSubjectAreaVOList){"object"==$.type(e.themisSubjectAreaVOList)&&(e.themisSubjectAreaVOList=[e.themisSubjectAreaVOList]);var t=Handlebars.getTemplate("themis-nav-bar-admin")(e);$("#themis-header-nav-bar-mobile").html(t),$("#themis-header-nav-bar-mobile .ipad-nav-li").remove(),$(".navbar-ipad-ul").html(t),$(".navbar-ipad-ul .visible-xs").remove(),$("#themisParentMenu").html($("ul#navbar-ipad-ul").html()),$("#themisQuizzesParentMenu").html($("ul#navbar-ipad-ul").html()),CaseConnect.themisSubjectAreaVOList=e.themisSubjectAreaVOList,localStorage.setItem("themisSubjectAreaVOList",JSON.stringify(CaseConnect.themisSubjectAreaVOList)),$("#page-loading-spinner").hide()}}else $("#page-loading-spinner").hide()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function getStudentBarOMeter(e){insideThemisStudProfile=!0,insideAdminQuiz=!1,insideThemis=!1,insideThemisAdmin=!0;var t=$("#startFilter").val(),i=$("#endFilter").val(),a={userVO:{userId:localStorage.getItem("userId"),userRole:localStorage.getItem("userRole"),userRoleId:localStorage.getItem("userRoleId"),userActivityVO:{lastActivityCode:"THEMIS_ADMIN_STUDENT_PROFILE_PAGE",pageNavigatingFrom:"Bookshelf",pageNavigatingTo:"EReader",themisSubjectAreaId:CaseConnect.themisSubjectAreaId,themisProductId:CaseConnect.currentProductId,themisStudentProfileUserId:e,lastReadPageNum:"",lastReadChapterId:"",lastReadSectionId:"",lastReadSubSectionId:"",lastReadParagraphId:"",lastViewedOutlineId:""},sessionVO:{appType:CaseConnect.appType,deviceType:CaseConnect.deviceType,deviceOS:CaseConnect.deviceOS,deviceMacId:CaseConnect.deviceMacId,keepMeLoggedInFlag:CaseConnect.keepMeLoggedInFlag,browserName:CaseConnect.browserName,sessionAuthenticationToken:localStorage.getItem("sessionAuthenticationToken")},schoolId:localStorage.getItem("mbeAdminSchoolId")},themisProductVO:{productId:CaseConnect.currentProductId},userSearchVO:{userId:e}};null!=t&&null!=t&&""!=t&&(a.themisProductVO.startDate=t+" 12:00 AM",a.userVO.userActivityVO.startDate=t+" 12:00 AM"),null!=i&&null!=i&&""!=i&&(a.themisProductVO.endDate=i+" 12:00 PM",a.userVO.userActivityVO.endDate=i+" 12:00 PM"),$.ajax({url:properties[properties.env]+"/manageThemis/getStudentProfileBarOMeter",type:"POST",contentType:"application/json",accept:"application/json",data:JSON.stringify(a)}).then(function(t){if($("#page-loading-spinner").show(),void 0!==t.sessionAuthenticationToken&&localStorage.setItem("sessionAuthenticationToken",t.sessionAuthenticationToken),"true"===t.status){if(localStorage.setItem("searchedUserId",e),insideThemisAdmin=!0,void 0!==t.themisResultVO){var i=t.themisResultVO;$("#total-questions-themis").html(i.totalQuestionCount);var a=Handlebars.getTemplate("themis-bar-o-meter")(i);$("#themis-bar-o-meter").html(a),$(".bar-answered-count").html(i.answeredCount),$(".bar-total-count").html(i.totalQuestionCount),$(".bar-enrolledDate").html("Enrolled since "+dateModification(t.enrolledDate)),void 0!==t.expiredDate&&$(".bar-enrolledDateExpiry").html("Access Expired "+dateModification(t.expiredDate));var s=$("input#all-average").prop("checked"),o=$("input#all-average").prop("checked");s?($(".course-triangle-all").show(),$(".course-triangle-institution").hide()):o?($(".course-triangle-all").hide(),$(".course-triangle-institution").show()):($(".course-triangle-all").hide(),$(".course-triangle-institution").hide());var n=$(".overall-progress-wrapper div.progress-bar-cc-correct").css("width");if("0%"===$(".overall-progress-wrapper div.progress-bar-cc-correct span").html()?$(".overall-progress-wrapper .progress-bar-cc-incorrect span").hide():$(".overall-progress-wrapper .progress-bar-cc-incorrect span").show(),parseInt(n)<35){var r=$(".progress-bar-cc-correct span.progress-text").width()+5+"px";$(".overall-progress-wrapper .progress-bar-cc-incorrect span").css({position:"absolute",left:r})}var l=$("#themis-bar-o-meter .quiz-details-title");navigator.userAgent.match(/(iPad|Android|iPhone)/)||insideTouchDevices?trigger="click":trigger="hover",l.find(".quiz-details-title-elem").popover({placement:"top",trigger:trigger,template:'<div class="popover themis-skill-desc-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return $(this).parent().find(".skill-desc-content").html()}})}$("#page-loading-spinner").hide()}else $(window).trigger("resize"),$("#page-loading-spinner").hide();"0"===$(".bar-answered-count").html()?$(".themis-generic-selector").hide():$(".themis-generic-selector").show(),sessionTimeOut()},function(e){Utility.handleSessionAuthentication(e.responseJSON)?($("#page-loading-spinner").hide(),alertMessagesModal(e.responseJSON.errorMessg)):window.location=properties.ui_domain})}function determineThemis(){if(localStorage.setItem("currentProductId",CaseConnect.currentProductId),null!=localStorage.getItem("themisAdminlanding")&&null!=localStorage.getItem("themisAdminlanding")&&"true"==localStorage.getItem("themisAdminlanding"))$("#page-loading-spinner").show(),$("#bookshelf-nav-menu-mobile").modal("hide"),$("#ereader-nav-menu-mobile").modal("hide"),$("#outline-nav-menu-mobile").modal("hide"),$("#study-nav-menu-mobile").modal("hide"),$("#cases-nav-menu-mobile").modal("hide"),$("#generic-nav-menu-mobile").modal("hide"),$("#news-feed-nav-mobile").modal("hide"),map.wk_conatiner.load("themis-admin-landing.html?v5",function(){insideResourcePage=!1,insideClassInsightsPage=!1,insideStudycenterPage=!1,insideNewsFeed=!1,insideEreader=!1,insideStudy=!1,insideStaticPage=!1,insideCasesPage=!1,insideOutline=!1,insideBookshelf=!1,insideGlobalSearchResult=!1,insideBarCheck=!0,themisLandingPage=!1,insideThemisStudProfile=!1,insideAdminQuiz=!1,insideThemisAdmin=!0,insideThemis=!1,insideCQuizzing=!1,insidePracticePerfect=!1,CaseConnect.themisSubjectAreaId="",CaseConnect.themisCurrentSubjectAreaTitle="",$(".ereader-main-header-title").html(""),$(".hide-study-page-class").hide(),$(".hide-ereader-class").hide(),$(".hide-outline-page-class").hide(),$(".hide-class-insights-class").hide(),$(".hide-pipe-line-class").hide(),$(".class-insights-mobile-visibility").css("visibility","hidden"),$(".hide-case-page-class").hide(),$(".hide-news-feed-class").hide(),"true"==CaseConnect.resourceFlag&&$(".resourceMenushow").removeClass("resourceMenuhide"),null!=localStorage.getItem("mbeAdminSchoolName")&&null!=localStorage.getItem("mbeAdminSchoolName")&&($(".nav-ipad-saTitleName.institution-name").html(localStorage.getItem("mbeAdminSchoolName")),$(".nav-ipad-saTitleName.institution-name").attr("title",localStorage.getItem("mbeAdminSchoolName"))),navBarAdmin(),courseProgressInstitution(),coursesPage(),quizzesPage(),$(window).trigger("resize"),adjustLeftNavHeight(),$(".navbar-ipad-section").children().removeClass("border-bottom-blue"),$(".navbar-ipad.institution").addClass("border-bottom-blue"),$("#themisAdminCourses-popover li a").removeClass("border-bottom-blue"),$("#page-loading-spinner").hide(),adminSuppressFunc()});else{var request={},reqData={};request.url=properties[properties.env]+"/manageThemis/getThemisSAByProductId",request.method="POST",request.handler=eval("Handler.themisBarProduct"),request.data=reqData,request.handler.request.apply(null,[request]),Utility.fireRequest(request)}}function closeAdminDropdown(e){e?($("#themisParentMenu").removeClass("in"),$("#themisCoursepage").addClass("collapsed"),$("#themisParentMenu").css("height","0px"),$(".quiz-span-icon").toggleClass("glyphicon-chevron-right").toggleClass("glyphicon-chevron-down"),$(".courses-span-icon").hasClass("glyphicon-chevron-down")&&$(".courses-span-icon").toggleClass("glyphicon-chevron-down").toggleClass("glyphicon-chevron-right")):($("#themisQuizzesParentMenu").removeClass("in"),$("#themisTakeQuizzes").addClass("collapsed"),$("#themisQuizzesParentMenu").css("height","0px"),$(".courses-span-icon").toggleClass("glyphicon-chevron-right").toggleClass("glyphicon-chevron-down"),$(".quiz-span-icon").hasClass("glyphicon-chevron-down")&&$(".quiz-span-icon").toggleClass("glyphicon-chevron-down").toggleClass("glyphicon-chevron-right"))}function oddEvenMedian(e){var t,i,a=!1;return e.length%2==0?(t=e.length/2,i=(parseInt(e[t].correct)+parseInt(e[t-1].correct))/2,a=!1):(t=(e.length+1)/2-1,i=parseInt(e[t].correct),a=!0),[t,i,a]}function exactJsonStudent(e){return e=e.length>0?{cumulativeAverage:generalList.cumulativeAverage,themisResultVOList:e,totalRegisteredStudents:generalList.totalRegisteredStudents,activeStudents:generalList.activeStudents}:{cumulativeAverage:generalList.cumulativeAverage,totalRegisteredStudents:generalList.totalRegisteredStudents,activeStudents:generalList.activeStudents}}function exactJsonCourses(e){return e=e.length>0?{institutionCumulativeAverage:generalList.institutionCumulativeAverage,themisResultVOList:e,activeStudents:generalList.activeStudents,totalRegisteredStudents:generalList.totalRegisteredStudents}:{institutionCumulativeAverage:generalList.institutionCumulativeAverage,activeStudents:generalList.activeStudents,totalRegisteredStudents:generalList.totalRegisteredStudents}}function exactJsonInstitution(e){return e=e.length>0?{institutionCumulativeAverage:generalList.institutionCumulativeAverage,themisSubjectAreaVOList:e,totalRegisteredStudents:generalList.totalRegisteredStudents}:{institutionCumulativeAverage:generalList.institutionCumulativeAverage,totalRegisteredStudents:generalList.totalRegisteredStudents}}function quartileJsonPreparation(e){var t,i,a,s,o=[],n=[];generalQuartileList=[],lowQuartileList=[],lowMidQuartileList=[],midHighQuartileList=[],highQuartileList=[];for(var r=0;r<generalList.themisResultVOList.length;r++)null!=generalList.themisResultVOList[r].incorrect&&null!=generalList.themisResultVOList[r].incorrect&&generalQuartileList.push(generalList.themisResultVOList[r]);if(generalQuartileList.length>2){var l=oddEvenMedian(generalQuartileList);s=l[0],i=l[1];for(var d=0;d<generalQuartileList.length;d++)d<s?o.push(generalQuartileList[d]):l[2]&&d==s||n.push(generalQuartileList[d]);if(n.length>0){var c=oddEvenMedian(n);c[0],t=c[1]}if(o.length>0){var u=oddEvenMedian(o);u[0],a=u[1]}for(var m=0;m<generalQuartileList.length;m++)parseInt(generalQuartileList[m].correct)>=a?highQuartileList.push(generalQuartileList[m]):parseInt(generalQuartileList[m].correct)<a&&parseInt(generalQuartileList[m].correct)>=i?midHighQuartileList.push(generalQuartileList[m]):parseInt(generalQuartileList[m].correct)<i&&parseInt(generalQuartileList[m].correct)>=t?lowMidQuartileList.push(generalQuartileList[m]):lowQuartileList.push(generalQuartileList[m]);"student"==e?(highQuartileList=exactJsonStudent(highQuartileList),midHighQuartileList=exactJsonStudent(midHighQuartileList),lowQuartileList=exactJsonStudent(lowQuartileList),lowMidQuartileList=exactJsonStudent(lowMidQuartileList)):(highQuartileList=exactJsonCourses(highQuartileList),midHighQuartileList=exactJsonCourses(midHighQuartileList),lowQuartileList=exactJsonCourses(lowQuartileList),lowMidQuartileList=exactJsonCourses(lowMidQuartileList)),$(".quartileContainer").show()}else $(".quartileContainer").hide()}function onClickOfQuartile(e,t){var i,a,s,o,n=$(".courses-filter-results").html(),r=$("#startFilter").val(),l=$("#endFilter").val();$(".quartileTablinks").removeClass("active"),e&&(i=$(e.currentTarget)),a=i.hasClass("stud")?Handlebars.getTemplate("themis-bar-landing-students"):Handlebars.getTemplate("themis-bar-landing-courses"),"all"==t?(s=a(generalList),o=generalList,null!=generalList.themisResultVOList&&null!=generalList.themisResultVOList?(highestPerformance=generalList.themisResultVOList,lowestPerformance=generalList.themisResultVOList,alphabetical=generalList.themisResultVOList,mostComplete=generalList.themisResultVOList,leastComplete=generalList.themisResultVOList,lowestPerformance=lowestPerformanceFunc(lowestPerformance),mostComplete=mostCompleteFunc(mostComplete),leastComplete=leastCompleteFunc(leastComplete),alphabetical=alphabeticalLastNameFunc(alphabetical)):(highestPerformance=[],lowestPerformance=[],alphabetical=[],mostComplete=[],leastComplete=[])):"low"==t?(s=a(lowQuartileList),o=lowQuartileList,null!=lowQuartileList.themisResultVOList&&null!=lowQuartileList.themisResultVOList?(highestPerformance=lowQuartileList.themisResultVOList,lowestPerformance=lowQuartileList.themisResultVOList,alphabetical=lowQuartileList.themisResultVOList,mostComplete=lowQuartileList.themisResultVOList,leastComplete=lowQuartileList.themisResultVOList,lowestPerformance=lowestPerformanceFunc(lowestPerformance),mostComplete=mostCompleteFunc(mostComplete),leastComplete=leastCompleteFunc(leastComplete),alphabetical=alphabeticalLastNameFunc(alphabetical)):(highestPerformance=[],lowestPerformance=[],alphabetical=[],mostComplete=[],leastComplete=[])):"lowMid"==t?(s=a(lowMidQuartileList),o=lowMidQuartileList,null!=lowMidQuartileList.themisResultVOList&&null!=lowMidQuartileList.themisResultVOList?(highestPerformance=lowMidQuartileList.themisResultVOList,lowestPerformance=lowMidQuartileList.themisResultVOList,alphabetical=lowMidQuartileList.themisResultVOList,mostComplete=lowMidQuartileList.themisResultVOList,leastComplete=lowMidQuartileList.themisResultVOList,lowestPerformance=lowestPerformanceFunc(lowestPerformance),mostComplete=mostCompleteFunc(mostComplete),leastComplete=leastCompleteFunc(leastComplete),alphabetical=alphabeticalLastNameFunc(alphabetical)):(highestPerformance=[],lowestPerformance=[],alphabetical=[],mostComplete=[],leastComplete=[])):"midHigh"==t?(s=a(midHighQuartileList),o=midHighQuartileList,null!=midHighQuartileList.themisResultVOList&&null!=midHighQuartileList.themisResultVOList?(highestPerformance=midHighQuartileList.themisResultVOList,lowestPerformance=midHighQuartileList.themisResultVOList,alphabetical=midHighQuartileList.themisResultVOList,mostComplete=midHighQuartileList.themisResultVOList,leastComplete=midHighQuartileList.themisResultVOList,lowestPerformance=lowestPerformanceFunc(lowestPerformance),mostComplete=mostCompleteFunc(mostComplete),leastComplete=leastCompleteFunc(leastComplete),alphabetical=alphabeticalLastNameFunc(alphabetical)):(highestPerformance=[],lowestPerformance=[],alphabetical=[],mostComplete=[],leastComplete=[])):"high"==t&&(s=a(highQuartileList),o=highQuartileList,null!=highQuartileList.themisResultVOList&&null!=highQuartileList.themisResultVOList?(highestPerformance=highQuartileList.themisResultVOList,lowestPerformance=highQuartileList.themisResultVOList,alphabetical=highQuartileList.themisResultVOList,mostComplete=highQuartileList.themisResultVOList,leastComplete=highQuartileList.themisResultVOList,lowestPerformance=lowestPerformanceFunc(lowestPerformance),mostComplete=mostCompleteFunc(mostComplete),leastComplete=leastCompleteFunc(leastComplete),alphabetical=alphabeticalLastNameFunc(alphabetical)):(highestPerformance=[],lowestPerformance=[],alphabetical=[],mostComplete=[],leastComplete=[])),$("#themis-course-admin-progress").html(s),skillSetCalc(o.themisResultVOList,"quartile",t,i.hasClass("stud")),$(".courses-filter-results").html(n),$("#startFilter").removeClass("hasDatepicker"),$("#endFilter").removeClass("hasDatepicker"),$("#startFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#endFilter").datepicker("option","minDate",e)}}),$("#endFilter").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"mm-dd-yy",yearRange:"2014:"+(new Date).getFullYear().toString(),maxDate:"0",onSelect:function(e){$("#startFilter").datepicker("option","maxDate",e)}}),null!=r&&""!=r&&null!=r&&$("#startFilter").val(r),null!=l&&""!=l&&null!=l&&$("#endFilter").val(l),$("#selectOrderBy").val("1"),i.hasClass("stud")?($(".studName").html(localStorage.getItem("studName")),highestPerformance=exactJsonStudent(highestPerformance),lowestPerformance=exactJsonStudent(lowestPerformance),mostComplete=exactJsonStudent(mostComplete),leastComplete=exactJsonStudent(leastComplete),alphabetical=exactJsonStudent(alphabetical)):($(".themis-admin-quiz-btn").attr("satitle",localStorage.getItem("CurrentSubjectAreaTitle")),$(".themis-course-name").html(localStorage.getItem("CurrentSubjectAreaTitle")),highestPerformance=exactJsonCourses(highestPerformance),lowestPerformance=exactJsonCourses(lowestPerformance),mostComplete=exactJsonCourses(mostComplete),leastComplete=exactJsonCourses(leastComplete),alphabetical=exactJsonCourses(alphabetical)),$(".quartileContainer").show(),$(".quartileTablinks").removeClass("active"),$(".quartileTablinks."+t).addClass("active"),$(window).trigger("resize")}function studentsPageDwnload(){var e={color:"#000000",size:1},t=moment(Date()).format("MM-DD-YYYY hh:mm A"),i=$("#startFilter").val(),a=$("#endFilter").val();if(""==i){var s=localStorage.getItem("excelStartDate");null!=s&&null!=s&&(i=s)}if(""==a){var o=new Date,n=o.getDate(),r=o.getMonth()+1;n<10&&(n="0"+n),r<10&&(r="0"+r),a=r+"-"+n+"-"+o.getFullYear()}var l=new kendo.data.DataSource({type:"odata",schema:{model:{fields:{StudentName:{type:"string"},Questions:{type:"number"},PercentCorrect:{type:"number"},FoundationalConceptsScore:{type:"number"},ImplementationScore:{type:"number"},ProblemSolvingScore:{type:"number"},LegalReasoningScore:{type:"number"}}}}}),d=[{cells:[{value:"Institution",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0,hAlign:"center"},{value:localStorage.getItem("mbeAdminSchoolName"),borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0,hAlign:"center"}]},{cells:[{value:"Date Generated",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:t,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[{value:"Reporting Period - Start Date",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:i,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[{value:"Reporting Period - End Date",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:a,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[]},{cells:[{value:"Student Name",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Questions Answered (out of 400)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Percent Correct (of questions answered) % ",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Foundational Concepts Score (%)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Implementation Score (%)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Problem Solving Score (%)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Legal Reasoning Score (%)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0}],height:40}];l.fetch(function(){for(var e=themisStudentDynamicReport,t=0;t<e.length;t++)d.push({cells:[{value:e[t].firstName+" "+e[t].lastName},{value:e[t].answeredCount,hAlign:"right"},{value:e[t].correct,hAlign:"right"},{value:e[t].fundamentalConceptsScorePercentage,hAlign:"right"},{value:e[t].implementationScorePercentage,hAlign:"right"},{value:e[t].problemSolvingScorePercentage,hAlign:"right"},{value:e[t].leaglReasoningScorePercentage,hAlign:"right"}]});var i=new kendo.ooxml.Workbook({sheets:[{columns:[{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0}],title:"MBE Insights Students Report",rows:d}]});kendo.saveAs({dataURI:i.toDataURL(),fileName:"Student_Report.xlsx"})})}function coursesPageDwnload(){var e={color:"#000000",size:1},t=moment(Date()).format("MM-DD-YYYY hh:mm A"),i=$("#startFilter").val(),a=$("#endFilter").val(),s=localStorage.getItem("CurrentSubjectAreaTitle");if(""==i){var o=localStorage.getItem("excelStartDate");null!=o&&null!=o&&(i=o)}if(""==a){var n=new Date,r=n.getDate(),l=n.getMonth()+1;r<10&&(r="0"+r),l<10&&(l="0"+l),a=l+"-"+r+"-"+n.getFullYear()}var d=new kendo.data.DataSource({type:"odata",schema:{model:{fields:{StudentName:{type:"string"},Questions:{type:"number"},PercentCorrect:{type:"number"},FoundationalConceptsScore:{type:"number"},ImplementationScore:{type:"number"},ProblemSolvingScore:{type:"number"},LegalReasoningScore:{type:"number"}}}}}),c=[{cells:[{value:"Institution",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0,hAlign:"center"},{value:localStorage.getItem("mbeAdminSchoolName"),borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0,hAlign:"center"}]},{cells:[{value:"Date Generated",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:t,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[{value:"Reporting Period - Start Date",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:i,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[{value:"Reporting Period - End Date",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:a,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[{value:"Course Area",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:s,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[]},{cells:[{value:"Student Name",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Questions Answered (out of 400)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Percent Correct (of questions answered) % ",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Foundational Concepts Score (%)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Implementation Score (%)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Problem Solving Score (%)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Legal Reasoning Score (%)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0}],height:40}];d.fetch(function(){for(var e=themisStudentCourseProgressReport,t=0;t<e.length;t++)c.push({cells:[{value:e[t].firstName+" "+e[t].lastName},{value:e[t].answeredCount,hAlign:"right"},{value:e[t].correct,hAlign:"right"},{value:e[t].fundamentalConceptsScorePercentage,hAlign:"right"},{value:e[t].implementationScorePercentage,hAlign:"right"},{value:e[t].problemSolvingScorePercentage,hAlign:"right"},{value:e[t].leaglReasoningScorePercentage,hAlign:"right"}]});var i=new kendo.ooxml.Workbook({sheets:[{columns:[{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0}],title:"MBE Insights Courses Report",rows:c}]});kendo.saveAs({dataURI:i.toDataURL(),fileName:"Student_Course_Report.xlsx"})})}function institutionPageDwnload(){var e={color:"#000000",size:1},t=moment(Date()).format("MM-DD-YYYY hh:mm A"),i=$("#startFilter").val(),a=$("#endFilter").val();localStorage.getItem("CurrentSubjectAreaTitle");if(""==i){var s=localStorage.getItem("excelStartDate");null!=s&&null!=s&&(i=s)}if(""==a){var o=new Date,n=o.getDate(),r=o.getMonth()+1;n<10&&(n="0"+n),r<10&&(r="0"+r),a=r+"-"+n+"-"+o.getFullYear()}var l=new kendo.data.DataSource({type:"odata"}),d=[{cells:[{value:"Institution",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0,hAlign:"center"},{value:localStorage.getItem("mbeAdminSchoolName"),borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0,hAlign:"center"}]},{cells:[{value:"Date Generated",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:t,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[{value:"Reporting Period - Start Date",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:i,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[{value:"Reporting Period - End Date",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e},{value:a,hAlign:"right",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e}]},{cells:[]},{cells:[{value:"Course Area",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Students",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Average Number of Questions Answered (out of 50)",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0},{value:"Percent Correct (of questions answered) %",hAlign:"center",borderBottom:e,borderLeft:e,borderRight:e,borderTop:e,bold:!0}],height:40}];l.fetch(function(){for(var e=themisSubjectAreaVOListForReport,t=0;t<e.length;t++)d.push({cells:[{value:e[t].subjectAreaName},{value:e[t].activeStudents,hAlign:"right"},{value:e[t].averageAnsweredQuestions,hAlign:"right"},{value:e[t].correct,hAlign:"right"}]});var i=new kendo.ooxml.Workbook({sheets:[{columns:[{autoWidth:!0},{autoWidth:!0},{autoWidth:!0},{autoWidth:!0}],title:"MBE Insights Institution Report",rows:d}]});kendo.saveAs({dataURI:i.toDataURL(),fileName:"Institution_Course_Report.xlsx"})})}function lowestPerformanceFunc(e){return e=e.slice().sort(function(e,t){return c1=parseFloat(e.incorrect),c2=parseFloat(t.incorrect),(null===c1)-(null===c2)||-(c1>c2)||+(c1<c2)})}function mostCompleteFunc(e){return e=e.slice().sort(function(e,t){return z1=parseFloat(e.answeredCount),z2=parseFloat(t.answeredCount),(null===z1)-(null===z2)||-(z1>z2)||+(z1<z2)})}function leastCompleteFunc(e){return e=e.slice().sort(function(e,t){return z1=parseFloat(e.answeredCount),z2=parseFloat(t.answeredCount),(null===z1)-(null===z2)||+(z1>z2)||-(z1<z2)})}function alphabeticalLastNameFunc(e){return e=e.slice().sort(function(e,t){return c1=e.lastName.toLowerCase(),c2=t.lastName.toLowerCase(),c1<c2?-1:c1>c2?1:0})}function separateDateTimeZon(e){var t=e.split("T")[0].split("-");return t[1]+"-"+t[2]+"-"+t[0]}function themisAdminPdfDownload(e){$("#pdf-download-delay-window-institution").modal("show"),$("#pdfConvertedInstitution").html(""),$("#pdfConvertedInstitution").css("vertical-align","middle"),$("#pdfConvertedInstitution").append("<div class='col-lg-6' id='pdf-fontChange'>CASEBOOK <span style='font-weight:bold;font-size:40px;'>CONNECT</span></div><div class='col-lg-3' style='float:right;'><img style='width:250px;' src='img/themis/MBEInsights_Logo.png'></div>");var t=$("#startFilter").val().replace(/-/g,"/"),i=$("#endFilter").val().replace(/-/g,"/");$("#pdfConvertedInstitution").append("<div class='col-lg-12' style='float:right;'><h3 id='selectedStartEndDate' style='float:right;'>"+t+"<span class='hideHyphon' style='padding:5px;'>-</span>"+i+"</h3></div>"),""==$("#startFilter").val()||""==$("#endFilter").val()?$("#pdfConvertedInstitution .hideHyphon").hide():$("#pdfConvertedInstitution .hideHyphon").show(),$("#themis-landing-content-area").clone().appendTo($("#pdfConvertedInstitution")),$("#pdfConvertedInstitution .orderByText").hide(),$("#pdfConvertedInstitution .themis-generic-total-count").css("display","block"),$("#pdfConvertedInstitution .line-break-course-device").css("display","block"),$("#pdfConvertedInstitution .themis-gray-label").removeClass("spacestyle"),$("#pdfConvertedInstitution .showOrderByPerformance p.showOrderByPerformanceText").addClass("performancetextShow"),$(".performancetextShow").html("Ordered by "+$("#selectOrderBy option:selected").text()),$("#pdfConvertedInstitution #example").after("<div id='totalResultKendoChart'></div>"),$("#pdfConvertedInstitution #example").after("<p id='errorMsgDeta' class='instance-msg-styles'>"+$("#pdfConvertedInstitution .courses-filter.themis-message p").html()+"</div>"),$("#pdfConvertedInstitution .courses-filter.themis-message p").hide(),$("#pdfConvertedInstitution").show(),$("#pdfConvertedInstitution .dwnLoadBtn").hide(),$("#pdfConvertedInstitution .performancesHidePdf").hide(),$("#pdfConvertedInstitution .courseInsightsTopStyles").css("margin-top","5%"),$("#pdfConvertedInstitution .courses-filter.themis-message p").show(),$("#pdfConvertedInstitution #selectedStartEndDate").css("position","relative").css("top","50px"),$("#pdfConvertedInstitution .sec-top .institutionCourseContent").addClass("courseInsightsContentHide"),$("#pdfConvertedInstitution .courses-filter.themis-message span").addClass("ViewResultsFromPdf"),$("#pdfConvertedInstitution .hasDatepicker").hide(),$("#pdfConvertedInstitution .courses-filter.themis-message.instanceMessagesHide").hide(),$("#pdfConvertedInstitution .btn-custom-prof.themis-light-button").hide(),$("#pdfConvertedInstitution .themis-admin-quiz-btn").removeClass("ipad-btn"),$("#pdfConvertedInstitution p.themis-message.spacetopstyle .studentCourseTextHide").addClass("hideTextinPdf"),$("#pdfConvertedInstitution #totalResultKendoChart").css("margin-left","0px").css("margin-top","10px"),$("#pdfConvertedInstitution .btnalignment").hide(),$("#pdfConvertedInstitution .quartileContainer").hide(),"No active users for specified date range."==$("#pdfConvertedInstitution .courses-filter-results.themis-message p").html()&&$("#pdfConvertedInstitution .showOrderByPerformance p.showOrderByContent").hide(),$("#pdfConvertedInstitution .progress.course-progress-bar").css("width","105%"),$("#pdfConvertedInstitution .courses-filter.themis-message p").hide(),$("#pdfConvertedInstitution #example").remove(),$("#pdfConvertedInstitution #skillSection svg").remove(),$("#pdfConvertedInstitution #skillSection .overall-skill-building").append("<div id='kl' class='col-lg-12 col-md-12 col-sm-12 col-xs-12'></div>"),kendo.drawing.drawDOM("#example").then(function(e){kendo.drawing.Surface.create($("#pdfConvertedInstitution #totalResultKendoChart"),{type:"pdf",width:"100%"}).draw(e)});var a=kendo.drawing,s=kendo.geometry,o=new a.Group;if($("#skillSection span.student-progress")[0]){""==(T=$("#skillSection span.student-progress")[0].innerText)||(T=parseInt(T)),T=parseInt(84*T/100);var n=new s.Circle([120,70],84),r=new a.Circle(n).stroke("#757575",1);o.append(r);var l=new s.Circle([120,70],T),d=new a.Circle(l).stroke("#85bc20",1).fill("#85bc20",1);o.append(d);var c=new a.Text($("#skillSection span.student-progress")[0].innerText,new s.Point(110,65));o.append(c)}if($("#skillSection span.student-progress")[1]){""==(T=$("#skillSection span.student-progress")[1].innerText)||(T=parseInt(T)),T=parseInt(84*T/100);var u=new s.Circle([320,70],84),m=new a.Circle(u).stroke("#757575",1);o.append(m);var h=new s.Circle([320,70],T),p=new a.Circle(h).stroke("#85bc20",1).fill("#85bc20",1);o.append(p);c=new a.Text($("#skillSection span.student-progress")[1].innerText,new s.Point(310,65));o.append(c)}if($("#skillSection span.student-progress")[2]){""==(T=$("#skillSection span.student-progress")[2].innerText)||(T=parseInt(T)),T=parseInt(84*T/100);var g=new s.Circle([540,70],84),v=new a.Circle(g).stroke("#757575",1);o.append(v);var b=new s.Circle([540,70],T),f=new a.Circle(b).stroke("#85bc20",1).fill("#85bc20",1);o.append(f);c=new a.Text($("#skillSection span.student-progress")[2].innerText,new s.Point(530,65));o.append(c)}if($("#skillSection span.student-progress")[3]){""==(T=$("#skillSection span.student-progress")[3].innerText)||(T=parseInt(T)),T=parseInt(84*T/100);var C=new s.Circle([760,70],84),S=new a.Circle(C).stroke("#757575",1);o.append(S);var I=new s.Circle([760,70],T),w=new a.Circle(I).stroke("#85bc20",1).fill("#85bc20",1);o.append(w);c=new a.Text($("#skillSection span.student-progress")[3].innerText,new s.Point(750,65));o.append(c)}($("#skillSection span.student-progress")[0]||$("#skillSection span.student-progress")[1]||$("#skillSection span.student-progress")[2]||$("#skillSection span.student-progress")[3])&&kendo.drawing.Surface.create($("#pdfConvertedInstitution #kl"),{type:"svg"}).draw(o);if($("#pdfConvertedInstitution .topic-display-name-wrapper svg").remove(),$("#pdfConvertedInstitution .topic-display-name-wrapper .pdfCircle").removeClass("pdfCircle").addClass("pdfCheck"),$(window).trigger("resize"),"institution"==e||"course"==e)for(var y=$(".pdfCircle"),A=$(".pdfCheck"),k=0;k<y.length;k++){var T;a=kendo.drawing,s=kendo.geometry,o=new a.Group;""==(T=y[k].innerText)||(T=parseInt(T)),T=parseInt(75*T/100);n=new s.Circle([90,70],75),r=new a.Circle(n).stroke("#757575",1);o.append(r);l=new s.Circle([90,70],T),d=new a.Circle(l).stroke("#85bc20",1).fill("#85bc20",1);o.append(d);c=new a.Text(y[k].innerText,new s.Point(80,65));o.append(c),kendo.drawing.Surface.create($(A[k]).parent().find("#pdfRendering"),{type:"svg"}).draw(o)}kendo.drawing.drawDOM("#pdfConvertedInstitution",{paperSize:"A4",margin:{top:"1cm",bottom:"1cm",right:"1cm",left:"1cm"},avoidLinks:!0,template:$("#page-template").html(),scale:.5,multiPage:!0,keepTogether:".prevent-split",repeatHeaders:!0}).then(function(t){var i="";i="institution"==e?"Institution_Report.pdf":"student"==e?"Student_Report.pdf":"Course_Report.pdf",kendo.drawing.pdf.saveAs(t,i),$("#pdf-download-delay-window-institution").modal("hide"),document.close(),$("#pdfConvertedInstitution").html("")})}function gaCodeTracking(e){function t(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],t("js",new Date),t("config",GACode[properties.env]),t("event","lst"==e?"LST link clicked":"News feed link clicked")}function connectQuizAssignPopover(e,t){var i,a,s,o,n,r,l,d,c,u,m,h,p,g,v,b,f=$(e.currentTarget),C=f.attr("sucesClick"),S=f.attr("quizIdentifier"),I=f.attr("classId"),w=$(".quiz-res-dec input[type=radio]:checked").hasClass("stud-sub"),y=$(".quiz-res-dec input[type=radio]:checked").val(),A=$(".modalClassNameHeader").html();if(f.hasClass("firstAssign")?(A=A.replace("<span> for </span>"," to "),$("#"+C+" .modalClassNameAssign").html("You are about to assign "+A),$("#"+C+" #modal-content-container p").html("Do you want to assign this quiz?"),$("#"+C+" #yesBtn").attr("onclick","assignQuiz(event)")):($("#"+C+" .modalClassNameAssign").html("You have changed the details for "+A),$("#"+C+" #modal-content-container p").html("Do you want to save these changes?"),$("#"+C+" #yesBtn").attr("onclick","reAssignQuiz(event)")),t)n=$("#calenderSelectStartDate").val(),n=moment(n).format("YYYY-MM-DD"),r=$("#calenderSelectStartTime").val(),l=$("#calenderSelectStartMins").val(),d=$("#calenderSelectStartMeridian").val(),i=$("#calenderSelectDueDate").val(),p=n,g=r,v=l,b=d,c=i=moment(i).format("YYYY-MM-DD"),u=a=$("#calenderSelectDueTime").val(),m=s=$("#calenderSelectDueMins").val(),h=o=$("#calenderSelectDueMeridian").val();else{var k=$("#myModalStart #calenderSelectStartDate").attr("quizeditstartdate");n=k.split(" ")[0],r=k.split(" ")[1].split(":")[0],l=k.split(" ")[1].split(":")[1],d=k.split(" ")[2],i=$("#myModalStart #calenderSelectDueDatemyModalStart").val(),p=n,g=r,v=l,b=d,c=i=moment(i).format("YYYY-MM-DD"),u=a=$("#myModalStart #calenderSelecteditDueTime").val(),m=s=$("#myModalStart #calenderSelecteditDueMins").val(),h=o=$("#myModalStart #calenderSelecteditDueMeridian").val()}if($(".errorMsgAssignQuiz").html(""),"Invalid date"===n&&t)return $(".errorMsgAssignQuiz").html("<span class='err col-sm-3' style='margin-left: 12%;margin-top: 23px;'><span class='password-err-label'>Select an start date and time.</span></span>"),!0;if("Invalid date"===i||null==a||null==s||null==o)return $(".errorMsgAssignQuiz").html("<span class='err col-sm-3' style='margin-left: 12%;margin-top: 23px;'><span class='password-err-label'>Select an end date and time.</span></span>"),!0;$(".errorMsgAssignQuiz").html(""),"PM"==o?24==(a="12"==a?a:parseInt(a)+12)&&(a=0):12==a&&(a="00"),"PM"==d?24==(r="12"==r?r:parseInt(r)+12)&&(r=0):12==r&&(r="00");var T=!1,P=moment.tz.guess(),R=moment.tz(i+" "+a+":"+s,P),O=moment.tz(n+" "+r+":"+l,P),M=moment.tz(),z=R.diff(M);if(R.diff(O)<6e4)$(".errorMsgAssignQuiz").html("<span class='err col-sm-3' style='margin-left: 16%;margin-top: 23px;'><span class='password-err-label'>Select a later end date and time.</span></span>"),T=!0;else if(z<6e4)$(".errorMsgAssignQuiz").html("<span class='err col-sm-3' style='margin-left: 16%;margin-top: 23px;'><span class='password-err-label'>Select a later end date and time.</span></span>"),T=!0;else{$(".errorMsgAssignQuiz").html("");var L=R.clone().tz("America/New_York"),D=L;L=separateDateTimeZon(L.format());var V=O.clone().tz("America/New_York"),F=V;V=separateDateTimeZon(V.format()),$(".errorMsgAssignQuiz").html(""),f.hasClass("dblAssign")?($("#myModalForPropertyIntroduction").modal("hide"),$("#"+C+" #noBtn").attr("onclick",'cancelAssignQuiz("myModalForPropertyIntroduction")')):($("#myModalStart").modal("hide"),$("#"+C+" #noBtn").attr("onclick",'cancelAssignQuiz("myModalStart")'));var N=f.attr("quizId");I=f.attr("classId");$("#"+C+" #yesBtn").attr("quizId",N),$("#"+C+" #yesBtn").attr("classId",I),$("#"+C+" #yesBtn").attr("quizIdentifier",S);var x=D.hours(),Q=D.minutes();x>12?(x-=12,o="PM"):o=12==x?"PM":"AM",x<10&&(x="0"+x),Q<10&&(Q="0"+Q);var j=F.hours(),B=F.minutes();j>12?(j-=12,d="PM"):d=12==j?"PM":"AM",j<10&&(j="0"+j),B<10&&(B="0"+B),$("#"+C+" #yesBtn").attr("estTime",L+" "+x+":"+Q+":00 "+o),$("#"+C+" #yesBtn").attr("publishResultInstantlyFlag",w),$("#"+C+" #yesBtn").attr("startTime",V+" "+j+":"+B+":00 "+d),$("#"+C+" #yesBtn").attr("resultOption",y)}if(!1===w&&"date_range"===y&&!1===T){var _="";"true"===localStorage.getItem("cqassistantFlag")?(_=$(".semester-drpdwnAssistant option:selected")[0].getAttribute("semesterenddate").split(" ")[0],$(".semester-drpdwnAssistant option:selected")[0].getAttribute("semesterstartdate").split(" ")[0]):(_=$(".semester-drpdwn option:selected")[0].getAttribute("semesterenddate").split(" ")[0],$(".semester-drpdwn option:selected")[0].getAttribute("semesterstartdate").split(" ")[0]),$("#myModalForDaterange").modal("show"),$("#myModalQuizStart").modal("hide"),$("#myModalAssignPopup #yesBtn").attr("resultOption",y),$("#modal-daterange-container #calenderSelectRangeDate").datepicker("destroy"),$("#modal-daterange-container #calenderSelectrangeDueDate").datepicker("destroy");var q=moment().format().split("T")[0],H=Date.parse(n);Date.parse(q)<=H?($("#modal-daterange-container #calenderSelectRangeDate").datepicker({dateFormat:"MM dd, yy",minDate:moment(n).format("MMMM DD, YYYY"),maxDate:moment(_).format("MMMM DD, YYYY")}),$("#modal-daterange-container #calenderSelectrangeDueDate").datepicker({dateFormat:"MM dd, yy",minDate:moment(n).format("MMMM DD, YYYY"),maxDate:moment(_).format("MMMM DD, YYYY")})):($("#modal-daterange-container #calenderSelectRangeDate").datepicker({dateFormat:"MM dd, yy",minDate:moment().format("MMMM DD, YYYY"),maxDate:moment(_).format("MMMM DD, YYYY")}),$("#modal-daterange-container #calenderSelectrangeDueDate").datepicker({dateFormat:"MM dd, yy",minDate:moment().format("MMMM DD, YYYY"),maxDate:moment(_).format("MMMM DD, YYYY")}));for(var Y="",E=1;E<13;E++)Y+=E<10?"<option value=0"+E+">0"+E+"</option>":"<option value="+E+">"+E+"</option>";if($("#calenderSelectreleaseStartTime").html(Y),$("#calenderSelectcloseDueTime").html(Y),f.hasClass("firstAssign"))$("#modal-daterange-container #calenderSelectRangeDate").val(moment(c).format("MMMM DD, YYYY")),$("#modal-daterange-container #calenderSelectreleaseStartTime").val(u),$("#modal-daterange-container #calenderSelectRangeMins").val(m),$("#modal-daterange-container #calenderSelectreleaseStartMeridian").val(h),$("#modal-daterange-container #calenderSelectcloseDueTime").val(""),$("#modal-daterange-container #calenderSelectcloseDueMins").val(""),$("#modal-daterange-container #calenderSelectcloseDueMeridian").val(""),$("#modal-daterange-container #calenderSelectrangeDueDate").datepicker().datepicker("setDate",moment().format("MMMM DD, YYYY")),$("#modal-daterange-container #calenderSelectrangeDueDate").val("");else{var J=f.attr("releaseDate"),U=f.attr("closeDate");void 0!==J&&""!==J?($("#modal-daterange-container #calenderSelectRangeDate").val(moment(J.split(" ")[0]).format("MMMM DD, YYYY")),$("#modal-daterange-container #calenderSelectreleaseStartTime").val(J.split(" ")[1].split(":")[0]),$("#modal-daterange-container #calenderSelectRangeMins").val(J.split(" ")[1].split(":")[1]),$("#modal-daterange-container #calenderSelectreleaseStartMeridian").val(J.split(" ")[2])):($("#modal-daterange-container #calenderSelectRangeDate").val(moment(c).format("MMMM DD, YYYY")),$("#modal-daterange-container #calenderSelectreleaseStartTime").val(u),$("#modal-daterange-container #calenderSelectRangeMins").val(m),$("#modal-daterange-container #calenderSelectreleaseStartMeridian").val(h)),void 0!==U&&""!==U?"3000"===U.split(" ")[0].split("-")[2]||"3000"===U.split(" ")[0].split("-")[0]?($("#modal-daterange-container #calenderSelectcloseDueTime").val(""),$("#modal-daterange-container #calenderSelectcloseDueMins").val(""),$("#modal-daterange-container #calenderSelectcloseDueMeridian").val(""),$("#modal-daterange-container #calenderSelectrangeDueDate").datepicker().datepicker("setDate",moment().format("MMMM DD, YYYY")),$("#modal-daterange-container #calenderSelectrangeDueDate").val("")):($("#modal-daterange-container #calenderSelectrangeDueDate").datepicker().datepicker("setDate",moment(U.split(" ")[0]).format("MMMM DD, YYYY")),$("#modal-daterange-container #calenderSelectcloseDueTime").val(U.split(" ")[1].split(":")[0]),$("#modal-daterange-container #calenderSelectcloseDueMins").val(U.split(" ")[1].split(":")[1]),$("#modal-daterange-container #calenderSelectcloseDueMeridian").val(U.split(" ")[2])):($("#modal-daterange-container #calenderSelectcloseDueTime").val(""),$("#modal-daterange-container #calenderSelectcloseDueMins").val(""),$("#modal-daterange-container #calenderSelectcloseDueMeridian").val(""),$("#modal-daterange-container #calenderSelectrangeDueDate").datepicker().datepicker("setDate",moment().format("MMMM DD, YYYY")),$("#modal-daterange-container #calenderSelectrangeDueDate").val(""))}$("#modal-daterange-container #dateRangeNextBtn").attr("resultOption",y),$("#modal-daterange-container #dateRangeNextBtn").attr("onclick","dateRangemodal(event)"),$("#modal-daterange-container #dateRangeNextBtn").attr("publishResultInstantlyFlag",w),$("#modal-daterange-container #dateRangeNextBtn").attr("startDate",p),$("#modal-daterange-container #dateRangeNextBtn").attr("startHrs",g),$("#modal-daterange-container #dateRangeNextBtn").attr("startMins",v),$("#modal-daterange-container #dateRangeNextBtn").attr("startMeridian",b),$("#myModalAssignPopup #yesBtn").attr("quizIdentifier",S),$("#myModalAssignPopup #yesBtn").attr("classId",I),$("#myModalAssignPopup #yesBtn").attr("quizId",N),$("#myModalAssignPopup #yesBtn").attr("estTime",L+" "+x+":"+Q+":00 "+o),$("#myModalAssignPopup #yesBtn").attr("startTime",V+" "+j+":"+B+":00 "+d)}else!1===T&&$("#"+C).modal("show")}function cancelAssignQuiz(e){$("#myModalAssignPopup").modal("hide"),$("#"+e).modal("show")}function ConnectQuizSetSection(e,t){$(".cloaseModelIcon").on("click",function(){$(".errorMsgAssignQuiz").html(""),$("#myModalForPropertyIntroduction").modal("hide")})}function rangeBoundbackSection(e){var t=$(e.currentTarget)[0];"reassign"===t.classList[5]?cancelAssignQuiz("myModalStart"):"assign"===t.classList[5]&&cancelAssignQuiz("myModalForPropertyIntroduction"),$("#myModalForDaterange").modal("hide"),$(".errorMsgAssignQuiz").html("")}function dateRangemodal(e){$(".errorMsgAssignQuiz").html("");var t=$(e.currentTarget).attr("resultOption"),i=$(e.currentTarget).attr("publishResultInstantlyFlag");if("false"===i&&"date_range"===t){var a=$("#calenderSelectRangeDate").val(),s=moment(a).format("YYYY-MM-DD"),o=$("#calenderSelectreleaseStartTime").val(),n=$("#calenderSelectRangeMins").val(),r=$("#calenderSelectreleaseStartMeridian").val(),l=$("#calenderSelectrangeDueDate").val(),d=moment(l).format("YYYY-MM-DD"),c=$("#calenderSelectcloseDueTime").val(),u=$("#calenderSelectcloseDueMins").val(),m=$("#calenderSelectcloseDueMeridian").val(),h=$("#calenderSelectcloseDueMeridian").val(),p=$(e.currentTarget).attr("startDate"),g=$(e.currentTarget).attr("startHrs"),v=$(e.currentTarget).attr("startMins"),b=$(e.currentTarget).attr("startMeridian");"PM"==m?24==(c="12"==c?c:parseInt(c)+12)&&(c=0):12==c&&(c="00"),"PM"==r?24==(o="12"==o?o:parseInt(o)+12)&&(o=0):12==o&&(o="00"),"PM"==b?24==(g="12"==g?g:parseInt(g)+12)&&(g=0):12==g&&(g="00");var f=moment.tz.guess(),C=moment.tz(d+" "+c+":"+u,f),S=moment.tz(s+" "+o+":"+n,f),I=moment.tz(),w=C.diff(I),y=C.diff(S),A=moment.tz(s+" "+o+":"+n,f),k=moment.tz(p+" "+g+":"+v,f),T=moment.tz(),P=(A.diff(T),A.diff(k));if(y<6e4)$(".errorMsgAssignQuiz").html("<span class='err col-sm-3' style='margin-left: 16%;margin-top: 23px;'><span class='close-date-label'>Please select a later Close Date and Time or remove your selections.</span></span>");else if(w<6e4)$(".errorMsgAssignQuiz").html("<span class='err col-sm-3' style='margin-left: 16%;margin-top: 23px;'><span class='close-date-label'>Please select a later Close Date and Time or remove your selections.</span></span>");else{if(!(P<6e4)){$(".errorMsgAssignQuiz").html("");var R=C.clone().tz("America/New_York"),O=R;R=separateDateTimeZon(R.format());var M=S.clone().tz("America/New_York"),z=M;M=separateDateTimeZon(M.format());var L=O.hours(),D=O.minutes();L>12?(L-=12,m="PM"):m=12==L?"PM":"AM",L<10&&(L="0"+L),D<10&&(D="0"+D);var V=z.hours(),F=z.minutes();return V>12?(V-=12,r="PM"):r=12==V?"PM":"AM",V<10&&(V="0"+V),F<10&&(F="0"+F),$("#myModalAssignPopup #yesBtn").attr("closeEstDate",R+" "+L+":"+D+":00 "+m),$("#myModalAssignPopup #yesBtn").attr("publishResultInstantlyFlag",i),$("#myModalAssignPopup #yesBtn").attr("releaseEstDate",M+" "+V+":"+F+":00 "+r),""!==l&&null!==l||""!==c&&null!==c||""!==u&&null!==u||""!==h&&null!==h?""!==l&&null!==l&&""!==c&&null!==c&&""!==u&&null!==u&&""!==h&&null!==h?($("#myModalForDaterange").modal("hide"),$("#myModalAssignPopup").modal("show"),$(".errorMsgAssignQuiz").html(""),$("#myModalAssignPopup #yesBtn").attr("releaseDate",s+" "+o+":"+n+":00 "+r),$("#myModalAssignPopup #yesBtn").attr("closedat",d+" "+c+":"+u+":00 "+m),$("#myModalAssignPopup #yesBtn").attr("resultOption",t),!0):($(".errorMsgAssignQuiz").html("<span class='err col-sm-3' style='margin-left: 12%;margin-top: 23px;margin-bottom: 10px;'><span class='password-err-label'>Please select a close Date  and Time or remove your selections.</span></span>"),!0):($("#myModalForDaterange").modal("hide"),$("#myModalAssignPopup").modal("show"),$(".errorMsgAssignQuiz").html(""),$("#myModalAssignPopup #yesBtn").attr("releaseDate",s+" "+o+":"+n+":00 "+r),$("#myModalAssignPopup #yesBtn").attr("closedat",d+" "+c+":"+u+":00 "+h),$("#myModalAssignPopup #yesBtn").attr("resultOption",t),!0)}$(".errorMsgAssignQuiz").html("<span class='err col-sm-3' style='margin-left: 16%;margin-top: 23px;'><span class='close-date-label'>Please select a later Release Date and Time.</span></span>")}}}function professorResultsPdfDownload(){$("#pdf-download-delay-window-professorresult").modal("show"),$("#professor-QuizResultspdf").html(""),$("#professor-QuizResultspdf").css("vertical-align","middle"),$("#professor-QuizResultspdf").append("<div class='col-lg-6' id='pdf-fontChange' style='padding-left:15px;margin-left:0;text-align:left;'>CASEBOOK <span style='font-weight:bold;font-size:40px;margin-left:0;text-align:left;'>CONNECT</span></div><div class='col-lg-3' style='float:right;'><img style='width:250px;' src='img/home/CQ_logo_grey_screen.png'></div>"),$("#profCQuiz-detailedResult-content-area").clone().appendTo($("#professor-QuizResultspdf")),$("#professor-QuizResultspdf .orderByText").hide(),$("#professor-QuizResultspdf .downloadBtnGroup").hide(),$("#professor-QuizResultspdf .backToQuiz").hide(),$("#professor-QuizResultspdf .proff-profName-ClassName .breadCrumbSection .barCodeSplit").css("margin-left","24px"),$("#professor-QuizResultspdf #profCQuiz-detailedResult-content-area").css("margin-top","5px"),$("#professor-QuizResultspdf .themis-generic-total-count").css("display","block"),$("#professor-QuizResultspdf .line-break-course-device").css("display","block"),$("#professor-QuizResultspdf .themis-gray-label").removeClass("spacestyle"),$("#professor-QuizResultspdf .showOrderByPerformance p.showOrderByPerformanceText").addClass("performancetextShow"),$(".performancetextShow").html("Ordered by "+$("#selectOrderBy option:selected").text()),$("#professor-QuizResultspdf #overAllPerformanceChart").html(""),$("#professor-QuizResultspdf .overAllPerformanceClass-parent #overAllPerformanceChart").append("<div id='overAllPerformanceChartPdf'></div>"),$("#professor-QuizResultspdf").show(),$("#professor-QuizResultspdf .dwnLoadBtn").hide(),$("#professor-QuizResultspdf .performancesHidePdf").hide(),$("#professor-QuizResultspdf .courseInsightsTopStyles").css("margin-top","5%"),$("#professor-QuizResultspdf .courses-filter.themis-message p").show(),$("#professor-QuizResultspdf #selectedStartEndDate").css("position","relative").css("top","50px"),$("#professor-QuizResultspdf .sec-top .institutionCourseContent").addClass("courseInsightsContentHide"),$("#professor-QuizResultspdf .courses-filter.themis-message p").addClass("instanseMessagePdf"),$("#professor-QuizResultspdf .courses-filter.themis-message span").addClass("ViewResultsFromPdf"),$("#professor-QuizResultspdf .hasDatepicker").hide(),$("#professor-QuizResultspdf .courses-filter.themis-message.instanceMessagesHide").hide(),$("#professor-QuizResultspdf .btn-custom-prof.themis-light-button").hide(),$("#professor-QuizResultspdf .themis-admin-quiz-btn").removeClass("ipad-btn"),$("#professor-QuizResultspdf p.themis-message.spacetopstyle .studentCourseTextHide").addClass("hideTextinPdf"),$("#professor-QuizResultspdf #overAllPerformanceChartPdf").css("margin-left","30px").css("margin-top","2px"),$("#professor-QuizResultspdf .btnalignment").hide(),$("#professor-QuizResultspdf .quartileContainer").hide(),$("#professor-QuizResultspdf .prof-expandResults").hide(),$("#professor-QuizResultspdf .prof-expandAllQuestions").hide(),$("#professor-QuizResultspdf .sortByOrderingSelect").css("padding","5px 0 0 10px"),$("#professor-QuizResultspdf .stud-timeSpentQuizTaken").css("text-align","right"),$("#professor-QuizResultspdf .stud-ClassName-ResultSection").css("width","791px"),$("#professor-QuizResultspdf .stud-ClassName-ResultSection").css("margin","14px 0"),$("#professor-QuizResultspdf #profCQuiz-TopicResult-progress").css("margin","10px 0 0"),$("#professor-QuizResultspdf .proff-ResultClassName-header").css("width","100%"),$("#professor-QuizResultspdf .overAllPerformanceChartSection").css("width","100%"),$("#professor-QuizResultspdf .overAllPerformanceClass").css("width","100%"),$("#professor-QuizResultspdf .prof-topicPerformanceSection").css("width","100%"),$("#professor-QuizResultspdf .prof-classNameOfResultDetails").css("width","100%"),$("#professor-QuizResultspdf .studentName-ResultsAvg").css("width","100%"),$("#professor-QuizResultspdf .prof-classNameOfResultDetailsAvg").css("width","100%").css("margin","0px 0 5px"),$("#professor-QuizResultspdf .stud-ClassName-ResultSection").css("width","100%"),$("#professor-QuizResultspdf .overAllPerformanceChartSection").css("width","100%"),$("#professor-QuizResultspdf .prof-timeSpentResultHiddenIpad").css("width","50%"),$("#professor-QuizResultspdf .prof-timeSpentResultDetails").css("width","50%"),$("#professor-QuizResultspdf .progress.course-progress-bar").css("width","100%"),$("#professor-QuizResultspdf .prof-DetailedStudentResultsSection").css("width","46%"),$("#professor-QuizResultspdf .studentName-Results").css("display","inline-block").css("width","75%").css(" word-break","break-word"),$("#professor-QuizResultspdf .studentName-Results").css("word-break","break-word"),$("#professor-QuizResultspdf #profCQuiz-studResult-progress").css("margin-top","10px"),$("#professor-QuizResultspdf .proff-ResultClassName-header").css("margin-left","0px"),$("#professor-QuizResultspdf .glypiconTickCorrect").css("margin-right","10px"),$("#professor-QuizResultspdf .correctWrongLabelStyle").css("text-align","right").css("width","50px"),$("#professor-QuizResultspdf .cqQuizcenterOrder .labelPdfMarginLeft").css("margin-left","18px"),$("#professor-QuizResultspdf .cqTopicperformance .labelPdfMarginLeft").css("margin-left","18px");var e=$("#professor-QuizResultspdf #profCQuiz-TopicResult-progress").html(),t=$("#professor-QuizResultspdf #profCQuiz-studResult-progress").html();e=e.replace(//g,"'").replace(//g,"'").replace(//g,'"').replace(//g,'"').replace(//g,"").replace(//g,"").replace(//g,"").replace(/-/g,"-"),t=t.replace(//g,"'").replace(//g,"'").replace(//g,'"').replace(//g,'"').replace(//g,"").replace(//g,"").replace(//g,"").replace(/-/g,"-"),$("#professor-QuizResultspdf #profCQuiz-TopicResult-progress").html(e),$("#professor-QuizResultspdf #profCQuiz-studResult-progress").html(t),$("#professor-QuizResultspdf #cqQuizcenterOrder  .answerStyleKey .correctWrongLabel").css("margin-left","25px"),$("#professor-QuizResultspdf #cqTopicperformance  .answerStyleKey .correctWrongLabel").css("margin-left","25px"),$("#professor-QuizResultspdf .orderingPercentageSection").css("margin-left","0%").css("width","50%").css("float","right").css("text-align","right"),$("#professor-QuizResultspdf .progress.course-progress-bar").css("width","99%");var i=$("#cqquestionOrder").val();$("#professor-QuizResultspdf #cqquestionOrder").val(i);var a=$("#sortingPerformanceOrder").val();$("#professor-QuizResultspdf #sortingPerformanceOrder").val(a),kendo.drawing.drawDOM("#overAllPerformanceChart").then(function(e){kendo.drawing.Surface.create($("#professor-QuizResultspdf #overAllPerformanceChartPdf"),{type:"pdf"}).draw(e)}),kendo.drawing.drawDOM("#professor-QuizResultspdf",{paperSize:"letter",margin:{top:"1cm",bottom:"1cm",right:"1cm",left:"1cm"},avoidLinks:!0,template:$("#result-page-template").html(),scale:.5,multiPage:!0,keepTogether:".prevent-split",repeatHeaders:!0}).then(function(e){kendo.drawing.pdf.saveAs(e,"professorResults.pdf"),$("#pdf-download-delay-window-professorresult").modal("hide"),document.close(),$("#professor-QuizResultspdf").html("")})}function professorPreviewresultsPdfDownload(){var e=$(".proff-ResultClassName-header").text(),t=$(".studSemesterNames").text(),i=moment(Date()).format("MM-DD-YYYY"),a=localStorage.getItem("email"),s=localStorage.getItem("firstName"),o=localStorage.getItem("lastName"),n=(new Date).toJSON().slice(0,10).split("-"),r="Connected Quizzing document produced exclusively for "+s+" "+o+" ("+a+") on "+(n[1]+"/"+n[2]+"/"+n[0])+".",l=n[0]+" CCH Incorporated or its affiliates";$("#pdf-download-delay-window-professorresult").modal("show"),$("#professor-PreviewResultspdf").html(""),$("#professor-PreviewResultspdf").css("vertical-align","middle"),$("#professor-PreviewResultspdf").append("<div class='col-lg-6' id='pdf-fontChange' style='padding-left:15px;margin-left:0;text-align:left;'>CASEBOOK <span style='font-weight:bold;font-size:40px;margin-left:0;text-align:left;'>CONNECT</span></div><div class='col-lg-3' style='float:right;'><img style='width:250px;' src='img/home/CQ_logo_grey_screen.png'></div>"),$("#profCQuiz-detailedResult-content-area").clone().appendTo($("#professor-PreviewResultspdf")),$("#professor-PreviewResultspdf .backToQuiz").hide(),$("#professor-PreviewResultspdf .ppQuizCollapseQuestion").html("Collapse"),$("#professor-PreviewResultspdf .ppQuizCollapseQuestion").addClass("collapsed"),$("#professor-PreviewResultspdf .answersFieldSection.collapse").css("height","auto"),$("#professor-PreviewResultspdf .answersFieldSection.collapse").addClass("in"),$("#professor-PreviewResultspdf .studSemesterNames").css("width","100%"),$("#professor-PreviewResultspdf .dwnLoadBtn").hide(),$("#professor-PreviewResultspdf").show(),$("#professor-PreviewResultspdf #profCQuiz-detailedResult-progress").css("margin","10px 0 0"),$("#professor-PreviewResultspdf .ordinalNumberPrev").removeClass("display-inline-block  col-lg-1 col-md-1 col-sm-1 col-xs-1 no-padding"),$("#professor-PreviewResultspdf .view-progress-page").remove(),$("#professor-PreviewResultspdf .expandRSPBtnGroup").remove(),$("#professor-PreviewResultspdf .downloadBtnGroup ").remove(),$("#professor-PreviewResultspdf .previewSec").remove(),$("#professor-PreviewResultspdf .pdfDel").remove(),$("#professor-PreviewResultspdf .promptTextfontpp").removeClass("col-lg-10 col-md-10 col-sm-10").addClass("col-lg-11 col-md-11 col-sm-11"),$("#professor-PreviewResultspdf .pdfHide").show();var d=$("#professor-PreviewResultspdf .preview-page").html();d=d.replace(//g,"'").replace(//g,"'").replace(//g,'"').replace(//g,'"').replace(//g,"").replace(//g,"").replace(//g,"").replace(/-/g,"-"),$("#professor-PreviewResultspdf .pdf-conv-symbol").html(d),kendo.pdf.defineFont({"DejaVu Sans":"fonts/DejaVu/DejaVuSans.ttf","DejaVu Sans|Bold":"fonts/DejaVu/DejaVuSans-Bold.ttf","DejaVu Sans|Bold|Italic":"fonts/DejaVu/DejaVuSans-Oblique.ttf","DejaVu Sans|Italic":"fonts/DejaVu/DejaVuSans-Oblique.ttf",WebComponentsIcons:"fonts/glyphs/WebComponentsIcons.ttf"}),$("#preview-page-template").html('<div class="page-template"><div><img class="watermark" src="img/cq/pdfWaterMark2.png"></div><div class="footerSec"><table class="tableFooter_1"><tr class="tr_footer1"><td colspan="2">'+r+'</td></tr><tr><td colspan="2">Redistribution is prohibited.</td></tr><tr class="trFooter_2"><td>Wolters Kluwer Legal & Regulatory, U.S.</td><td><span style="margin-top:8px;font-family: "DejaVu Sans;" class="k-icon my-custom-icon-class"></span>'+l+"</td></tr></table></div></div>"),kendo.drawing.drawDOM("#professor-PreviewResultspdf",{paperSize:"letter",margin:{top:"1cm",left:"1cm",right:"1cm",bottom:"2cm"},avoidLinks:!0,template:$("#preview-page-template").html(),scale:.5,multiPage:!0,keepTogether:".prevent-split",repeatHeaders:!0,contenteditable:!1}).then(function(a){var s="preview_"+e+"_"+t+"_"+i+".pdf";kendo.drawing.pdf.saveAs(a,s),$("#pdf-download-delay-window-professorresult").modal("hide"),document.close(),$("#professor-PreviewResultspdf").html("")})}function showCqMoblieMenu(e){void 0!==$("#"+e).data()["bs.modal"]?$("#"+e).data()["bs.modal"].isShown?($("div.ereader-page-info-modal-container .ereader-top-nav-cog").attr("onclick","showAccountMenuInMobile('"+e+"')"),$("div.common-book-info-modal-container .ereader-top-nav-cog").addClass("cc-header-account").removeClass("glyphicon glyphicon-remove")):($("#"+e).modal("show"),$(".ereader-assessment-content-area").scrollTop(0),$("div.common-book-info-modal-container .ereader-top-nav-cog").removeClass("cc-header-account").addClass("glyphicon glyphicon-remove"),$("div.common-book-info-modal-container .ereader-top-nav-cog").attr("onclick","closeOverlayInMobile('"+e+"')")):($("#"+e).modal("show"),$("div.common-book-info-modal-container .ereader-top-nav-cog").removeClass("cc-header-account").addClass("glyphicon glyphicon-remove"),$("div.common-book-info-modal-container .ereader-top-nav-cog").attr("onclick","closeOverlayInMobile('"+e+"')")),$(".common-book-menu-dropdown").attr("onclick","showAccountMenuFromHamburger('"+e+"');")}function closeCqMenuModal(e){$("#"+e).modal("hide"),$("#"+e).data()["bs.modal"].isShown?"none"===$(".mobile-read-menu-dropdown").css("display")&&(insideCQuizzing?e="cq-nav-menu-mobile":insidePracticePerfect&&(e="pp-nav-menu-mobile"),$("div.common-book-info-modal-container .ereader-top-nav-cog").addClass("cc-header-account").removeClass("glyphicon glyphicon-remove"),$("div.common-book-info-modal-container .ereader-top-nav-cog").attr("onclick","showAccountMenuInMobile('"+e+"')"),$(".common-book-menu-dropdown").attr("onclick","showAccountMenuFromHamburger('"+e+"');")):(insideCQuizzing?e="cq-nav-menu-mobile":insidePracticePerfect&&(e="pp-nav-menu-mobile"),$("div.common-book-info-modal-container .ereader-top-nav-cog").addClass("cc-header-account").removeClass("glyphicon glyphicon-remove"),$("div.common-book-info-modal-container .ereader-top-nav-cog").attr("onclick","showAccountMenuInMobile('"+e+"')"),$(".common-book-menu-dropdown").attr("onclick","showAccountMenuFromHamburger('"+e+"');"))}function skillSetCalc(e,t,i,a){var s=0,o=0,n=0,r=0,l=0;if(null!=e&&null!=e){for(var d=0;d<e.length;d++)e[d].fundamentalConceptsScorePercentage&&(s+=parseFloat(e[d].fundamentalConceptsScorePercentage),l++),e[d].implementationScorePercentage&&(o+=parseFloat(e[d].implementationScorePercentage)),e[d].problemSolvingScorePercentage&&(n+=parseFloat(e[d].problemSolvingScorePercentage)),e[d].leaglReasoningScorePercentage&&(r+=parseFloat(e[d].leaglReasoningScorePercentage));var c=[];c=0==l?{themisSkillSetResultVOList:{fundamentalConceptsScore:"0",implementationScore:"0",leaglReasoningScore:"0",problemSolvingScore:"0"}}:{themisSkillSetResultVOList:{fundamentalConceptsScore:(s/l).toString(),implementationScore:(o/l).toString(),leaglReasoningScore:(r/l).toString(),problemSolvingScore:(n/l).toString()}};var u=Handlebars.getTemplate("themisSkill-ReportSection")(c);$("#skillSection").html(u);var m="";"student"==t?m="Skill Building":"course"==t?(localStorage.getItem("CurrentSubjectAreaTitle")&&(m="Skill Building in "+localStorage.getItem("CurrentSubjectAreaTitle")),getUniversityTopicProgressBySA(CaseConnect.themisSubjectAreaId)):(a?m="Skill Building":(localStorage.getItem("CurrentSubjectAreaTitle")&&(m="Skill Building in "+localStorage.getItem("CurrentSubjectAreaTitle")),openTab(event,"studRes"),$(".nav-item-students-tab a").addClass("tab-selected"),getUniversityTopicProgressBySA(CaseConnect.themisSubjectAreaId)),"high"==i?m+=": High Quartile":"low"==i?m+=": Low Quartile":"lowMid"==i?m+=": Low-Mid Quartile":"midHigh"==i&&(m+=": Mid-High Quartile")),$("#skillSection .no-margin").html(m),$("#skillSection").show();var h=$("#skillSection .quiz-details-title");navigator.userAgent.match(/(iPad|Android|iPhone)/)||insideTouchDevices?trigger="click":trigger="hover",h.find(".quiz-details-title-elem").popover({placement:"top",trigger:trigger,template:'<div class="popover themis-skill-desc-content" aria-hidden="true" tabindex="-1" role="dialog"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return $(this).parent().find(".skill-desc-content").html()}})}else $("#skillSection").hide(),a||(openTab(event,"studRes"),$(".nav-item-students-tab a").addClass("tab-selected"),getUniversityTopicProgressBySA(CaseConnect.themisSubjectAreaId))}function openTab(e,t){var i,a,s;for(a=document.getElementsByClassName("stud-topic-tab"),i=0;i<a.length;i++)a[i].style.display="none";for(s=document.getElementsByClassName("titleTab"),i=0;i<a.length;i++)s[i].className=s[i].className.replace(" tab-selected","");document.getElementById(t).style.display="block",e&&(e.currentTarget.className+=" tab-selected")}Handlebars.registerHelper("setIndexString",function(e){this.index=e.toString()}),Handlebars.registerHelper("skillSingleWord",function(e){return"Foundational Concepts"===e?"foundationalConcepts":"Implementation"===e?"implementation":"Problem Solving"===e?"problemSolving":"Legal Reasoning"===e?"legalReasoning":void 0}),Handlebars.registerHelper("sendOption",function(e,t){return pickChoiceID(e)}),Handlebars.registerHelper("radiusThemis",function(){$(window).width();return themisLandingPage||insideThemisStudProfile?84:47}),Handlebars.registerHelper("progressIncrement",function(e){var t=$(window).width(),i=(themisLandingPage||insideThemisStudProfile||insideThemisAdmin?84:t<992&&t>767?84:47)*(e=parseInt(e))/100;return Math.floor(i)}),Handlebars.registerHelper("unansweredPercentage",function(e,t){return Math.round(100-(parseInt(e)+parseInt(t)))}),Handlebars.registerHelper("parseInt",function(e){return Math.round(parseInt(e))}),Handlebars.registerHelper("checkTheQuestion",function(e){return Math.round(parseInt(e))}),Handlebars.registerHelper("convertSecstoHrs",function(e){return convertSecstoHrs(e)}),Handlebars.registerHelper("fetchCrctOptionCQ",function(e){return fetchCrctAnsCQ(e)}),Handlebars.registerHelper("checkConfidenceDate",function(e,t){return compareDateWithcurrentDate(e)>121e7?'<div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 no-padding no-padding pp-questionsCount late-score" data-parent="'+t+'">Your progress is fading because you havent reviewed this topic in over two weeks. Take a quiz to update your score.</div>':""}),Handlebars.registerHelper("checkConfidenceDateClass",function(e){return compareDateWithcurrentDate(e)>121e7?"gradient-progressBar":"confi-progressBar"}),Handlebars.registerHelper("strJoin",function(e){return"string"==$.type(e)&&(e=[e]),e.join(", ")}),Handlebars.registerHelper("timeLeft",function(e){var t=compareTimeWithLocal(e),i=t/1e3;return i=t>0?"Time Left: "+(i=convertSecstoHrs(i)):"Completed"}),Handlebars.registerHelper("dueDate",function(e){var t=compareTimeWithLocal(e);return t>0?"Due: "+convetTimeESTAppend(e):"Not Submitted"}),Handlebars.registerHelper("dueDateafterCompleted",function(e){compareTimeWithLocal(e);return"Due: "+convetTimeESTAppend(e)}),Handlebars.registerHelper("convertStartTime",function(e){return convertStartTimeFunc(e)}),Handlebars.registerHelper("checkHeadpart",function(e){return e=e.replace("Recommended Reading: ","")}),Handlebars.registerHelper("dueDateprof",function(e){var t=compareTimeWithLocal(e);return t>0?"Due: "+convetTimeESTAppend(e):"Completed"}),Handlebars.registerHelper("startDateProf",function(e){var t=compareTimeWithLocal(e),i=t/1e3;return t>0&&(i="Starts on: "+convetTimeESTAppend(e)),i}),Handlebars.registerHelper("ceilParseFloat",function(e){return Math.ceil(parseFloat(e))}),Handlebars.registerHelper("setUrlPath",function(e){return"ConnectedQuiz"==e?properties.full_base_url+"img/bookshelf/CQ-cover.png":properties.full_base_url+"img/themis/MBE_bars.png"}),Handlebars.registerHelper("floorParseFloat",function(e){return Math.floor(parseFloat(e))}),Handlebars.registerHelper("chooseColor",function(e){return parseInt(e)>40?"white":"blk"}),Handlebars.registerHelper("roundToSingle",function(e){return roundToOne(e)}),Handlebars.registerHelper("elemCheck",function(e){return"Foundational Concepts"===e?"foundationalConcepts":"Implementation"===e?"implementation":"Problem Solving"===e?"problemSolving":"Legal Reasoning"===e?"legalReasoning":void 0}),Handlebars.registerHelper("skillTitleCheck",function(e){return"Foundational Concepts"===e?'<div class="popover-box faculty-class-code-tooltip-text" elem="foundationalConcepts"><div>Foundational Concepts</div><div style="margin-top: 10px;">Students are able to understand, memorize, and identify key concepts of black-letter law.</div></div>':"Implementation"===e?'<div class="popover-box faculty-class-code-tooltip-text" elem="implementation"><div>Implementation</div><div style="margin-top: 10px;">Students are able to apply the fundamental concepts learned to specific factual scenarios.</div></div>':"Problem Solving"===e?'<div class="popover-box faculty-class-code-tooltip-text" elem="problemSolving"><div>Problem Solving</div><div style="margin-top: 10px;">Students are able to draw appropriate conclusions based on fundamental concepts and legally operative facts, and to justify the chosen outcome when applicable.</div></div>':"Legal Reasoning"===e?'<div class="popover-box faculty-class-code-tooltip-text" elem="legalReasoning"><div>Legal Reasoning</div><div style="margin-top: 10px;">Students are able to determine which fundamental concepts apply to a specific factual scenario.</div></div>':void 0}),Handlebars.registerHelper("pathCreationInvert",function(e){var t,i=$(window).width();t=themisLandingPage||insideThemisStudProfile||insideThemisAdmin?84:i<992&&i>767?84:47,e=parseInt(e);var a=parseInt(t*e/100);return"M 90 90 m -"+a+", 0 a "+a+","+a+" 0 1,0 "+2*a+",0"}),Handlebars.registerHelper("pathCreation",function(e){var t,i=$(window).width();t=themisLandingPage||insideThemisStudProfile||insideThemisAdmin?84:i<992&&i>767?84:47,e=parseInt(e);var a=parseInt(t*e/100);return"M 90 90 m "+a+",0 a "+a+","+a+" 0 1,0 -"+2*a+",0"}),$(window).on("resize",function(){insideThemisAdmin&&kendo.resize($("#example"))});