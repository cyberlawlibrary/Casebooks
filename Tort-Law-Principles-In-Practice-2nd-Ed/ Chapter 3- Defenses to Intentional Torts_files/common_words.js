var NBP=function(){var o={},r=function(){function o(o,r){if(!n[o]){n[o]={};for(var t=0;t<o.length;t++)n[o][o.charAt(t)]=t}return n[o][r]}var r=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={},i={compressToBase64:function(o){if(null==o)return"";var r=i._compress(o,6,function(o){return t.charAt(o)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(e){return o(t,r.charAt(e))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(o){return null==o?"":""==o?null:i._decompress(o.length,16384,function(r){return o.charCodeAt(r)-32})},compressToUint8Array:function(o){for(var r=i.compress(o),t=new Uint8Array(2*r.length),e=0,n=r.length;n>e;e++){var s=r.charCodeAt(e);t[2*e]=s>>>8,t[2*e+1]=s%256}return t},decompressFromUint8Array:function(o){if(null==o)return i.decompress(o);for(var t=new Array(o.length/2),e=0,n=t.length;n>e;e++)t[e]=256*o[2*e]+o[2*e+1];var s=[];return t.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(o){return null==o?"":i._compress(o,6,function(o){return e.charAt(o)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(t){return o(e,r.charAt(t))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(o,r,t){if(null==o)return"";var e,n,i,s={},l={},a="",c="",u="",p=2,h=3,f=2,d=[],m=0,b=0;for(i=0;i<o.length;i+=1)if(a=o.charAt(i),Object.prototype.hasOwnProperty.call(s,a)||(s[a]=h++,l[a]=!0),c=u+a,Object.prototype.hasOwnProperty.call(s,c))u=c;else{if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(e=0;f>e;e++)m<<=1,b==r-1?(b=0,d.push(t(m)),m=0):b++;for(n=u.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n>>=1}else{for(n=1,e=0;f>e;e++)m=m<<1|n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n=0;for(n=u.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n>>=1}0==--p&&(p=Math.pow(2,f),f++),delete l[u]}else for(n=s[u],e=0;f>e;e++)m=m<<1|1&n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n>>=1;0==--p&&(p=Math.pow(2,f),f++),s[c]=h++,u=String(a)}if(""!==u){if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(e=0;f>e;e++)m<<=1,b==r-1?(b=0,d.push(t(m)),m=0):b++;for(n=u.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n>>=1}else{for(n=1,e=0;f>e;e++)m=m<<1|n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n=0;for(n=u.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n>>=1}0==--p&&(p=Math.pow(2,f),f++),delete l[u]}else for(n=s[u],e=0;f>e;e++)m=m<<1|1&n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n>>=1;0==--p&&(p=Math.pow(2,f),f++)}for(n=2,e=0;f>e;e++)m=m<<1|1&n,b==r-1?(b=0,d.push(t(m)),m=0):b++,n>>=1;for(;;){if(m<<=1,b==r-1){d.push(t(m));break}b++}return d.join("")},decompress:function(o){return null==o?"":""==o?null:i._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,t,e){var n,i,s,l,a,c,u,p=[],h=4,f=4,d=3,m="",b=[],v={val:e(0),position:t,index:1};for(n=0;3>n;n+=1)p[n]=n;for(s=0,a=Math.pow(2,2),c=1;c!=a;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=e(v.index++)),s|=(l>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,a=Math.pow(2,8),c=1;c!=a;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=e(v.index++)),s|=(l>0?1:0)*c,c<<=1;u=r(s);break;case 1:for(s=0,a=Math.pow(2,16),c=1;c!=a;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=e(v.index++)),s|=(l>0?1:0)*c,c<<=1;u=r(s);break;case 2:return""}for(p[3]=u,i=u,b.push(u);;){if(v.index>o)return"";for(s=0,a=Math.pow(2,d),c=1;c!=a;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=e(v.index++)),s|=(l>0?1:0)*c,c<<=1;switch(u=s){case 0:for(s=0,a=Math.pow(2,8),c=1;c!=a;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=e(v.index++)),s|=(l>0?1:0)*c,c<<=1;p[f++]=r(s),u=f-1,h--;break;case 1:for(s=0,a=Math.pow(2,16),c=1;c!=a;)l=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=e(v.index++)),s|=(l>0?1:0)*c,c<<=1;p[f++]=r(s),u=f-1,h--;break;case 2:return b.join("")}if(0==h&&(h=Math.pow(2,d),d++),p[u])m=p[u];else{if(u!==f)return null;m=i+i.charAt(0)}b.push(m),p[f++]=i+m.charAt(0),i=m,0==--h&&(h=Math.pow(2,d),d++)}}};return i}();return"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof module&&null!=module&&(module.exports=r),bloom={initalized:!1,hashRounds:null,bitArray:null,bitArrayLength:null},initState=!1,bloom.hashes={djb2:function(o){for(var r=5381,t=o.length,e=0;t>e;e++)r=33*r^o.charCodeAt(e);return(r>>>0)%bloom.bitArrayLength},sdbm:function(o){for(var r=0,t=o.length,e=0;t>e;e++)r=o.charCodeAt(e)+(r<<6)+(r<<16)-r;return(r>>>0)%bloom.bitArrayLength},getIndices:function(o){var r=[];r.push(this.djb2(o)),r.push(this.sdbm(o));for(var t=2;t<=bloom.hashRounds;t++){var e=(r[0]+t*r[1]+(2^t))%bloom.bitArrayLength;r.push(e)}return r}},bloom.init=function(o,t){var e=r.decompressFromUTF16(o).split(",");bloom.bitArrayLength=8*e.length,bloom.hashRounds=Math.round(Math.log(2)*bloom.bitArrayLength/t),bloom.bitArray=new Uint8Array(e),bloom.initalized=!0},bloom.checkEntry=function(o){if(!bloom.initalized)throw new Error("[NBP] Bloom filter has not been initalized, cannot run.");for(var r=bloom.hashes.getIndices(o),t=r.length-1;t>=0;t--){var e=r[t]%8,n=(r[t]-e)/8;if(0!=e&&0==(bloom.bitArray[n]&128>>e-1))return!1;if(0==e&&0==(1&bloom.bitArray[n]))return!1}return!0},o.debug={bloom:bloom},o.init=function(){var o=void 0!==arguments[0]?arguments[0]:"mostcommon_10000",r=void 0!==arguments[1]?arguments[1]:"collections/",t=void 0===arguments[2]||arguments[2],e=o.split("_"),n=e[e.length-1];if("number"==typeof n)return console.error("[NBP] Provided wordlist file must match the format [list description]_[list length]"),console.error("i.e. mostcommon_10000"),!1;if("/"!==r.slice(-1)&&(r+="/"),"undefined"!=typeof localStorage&&void 0!==localStorage["NBP_"+o]&&t)bloom.init(localStorage["NBP_"+o],n);else{var i=new XMLHttpRequest,s="";i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(200===i.status?(s=i.responseText,t&&(localStorage["NBP_"+o]=s),bloom.init(s,n),initState=!0):(console.error("[NBP] Error retrieving bloom contents. Error code: "+i.status),console.error("[NBP] Ensure that the word list is located at "+r+o),console.error("[NBP] Additionally, file must match the format [list description]_[list length]")))},i.open("GET",""+r+o,!0),i.send(null)}},o.isCommonPassword=function(o){return""!=o&&(bloom.checkEntry(o)||bloom.checkEntry(o.toLowerCase()))},o.testInit=function(){var o=void 0!==arguments[0]?arguments[0]:"mostcommon_100000",r=require("fs"),t=o.split("_"),e=t[t.length-1],n=r.readFileSync("collections/"+o,"utf8");bloom.init(n,e)},o}();"undefined"!=typeof module&&(module.exports=NBP);